<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>fl.int.Intersection</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library fl.int.Intersection</h1>

<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Lists.List.html#"><span class="id" title="library">List</span></a>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="fl.cfg.Base.html#"><span class="id" title="library">fl.cfg.Base</span></a> <a class="idref" href="fl.cfg.Definitions.html#"><span class="id" title="library">fl.cfg.Definitions</span></a> <a class="idref" href="fl.cfg.Dec_Empty.html#"><span class="id" title="library">fl.cfg.Dec_Empty</span></a> <a class="idref" href="fl.cfg.Binarize.html#"><span class="id" title="library">fl.cfg.Binarize</span></a> <a class="idref" href="fl.cfg.Chomsky.html#"><span class="id" title="library">fl.cfg.Chomsky</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="comment">(*&nbsp;fl.int.Base2&nbsp;*)</span> <span class="comment">(*&nbsp;INT.DFA*)</span> <a class="idref" href="fl.int.ChomskyInduction.html#"><span class="id" title="library">fl.int.ChomskyInduction</span></a> .<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Vectors.Fin.html#"><span class="id" title="library">Fin</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="fl.int.DFA.html#"><span class="id" title="library">fl.int.DFA</span></a> <a class="idref" href="fl.int.Union.html#"><span class="id" title="library">fl.int.Union</span></a>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <a name="Intersection"><span class="id" title="module">Intersection</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> <span class="id" title="var">ListNotations</span> <span class="id" title="var">Dec_Empty</span> <span class="id" title="var">Base</span> <span class="id" title="var">Symbols</span> <span class="id" title="var">DFA</span> <span class="id" title="var">Base2.Base</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ChomskyInduction</span> <span class="id" title="var">Definitions</span> <span class="id" title="var">Derivation</span> <span class="id" title="var">Chomsky</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Feed&nbsp;tactic&nbsp;--&nbsp;exploit&nbsp;with&nbsp;multiple&nbsp;arguments.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(taken&nbsp;from&nbsp;http://comments.gmane.org/gmane.science.mathematics.logic.coq.club/7013)&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Ltac</span> <span class="id" title="var">feed</span> <span class="id" title="var">H</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">type</span> <span class="id" title="var">of</span> <span class="id" title="var">H</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| ?<span class="id" title="var">foo</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="var">_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">FOO</span> := <span class="id" title="tactic">fresh</span> <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> <span class="id" title="var">foo</span> <span class="id" title="keyword">as</span> <span class="id" title="var">FOO</span>; [|<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H</span> <span class="id" title="var">FOO</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">FOO</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Ltac</span> <span class="id" title="var">feed_n</span> <span class="id" title="var">n</span> <span class="id" title="var">H</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">constr</span>:<span class="id" title="var">n</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#O"><span class="id" title="constructor">O</span></a> ⇒ <span class="id" title="tactic">idtac</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| (<a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> ?<span class="id" title="var">m</span>) ⇒ <span class="id" title="var">feed</span> <span class="id" title="var">H</span> ; [| <span class="id" title="var">feed_n</span> <span class="id" title="var">m</span> <span class="id" title="var">H</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab1"></a><h1 class="section">Util</h1>
 In this section we prove a few useful facts. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a name="Intersection.Util"><span class="id" title="section">Util</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a name="Intersection.Util.Projections"><span class="id" title="section">Projections</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>: <span class="id" title="keyword">Type</span>}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Intersection.fst3"><span class="id" title="definition">fst3</span></a> (<span class="id" title="var">t</span>: <a class="idref" href="fl.int.Intersection.html#Intersection.Util.Projections.A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Util.Projections.B"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Util.Projections.C"><span class="id" title="variable">C</span></a>): <a class="idref" href="fl.int.Intersection.html#Intersection.Util.Projections.A"><span class="id" title="variable">A</span></a> := <span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">from</span><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> := <a class="idref" href="fl.int.Intersection.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">from</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Intersection.snd3"><span class="id" title="definition">snd3</span></a> (<span class="id" title="var">t</span>: <a class="idref" href="fl.int.Intersection.html#Intersection.Util.Projections.A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Util.Projections.B"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Util.Projections.C"><span class="id" title="variable">C</span></a>): <a class="idref" href="fl.int.Intersection.html#Intersection.Util.Projections.B"><span class="id" title="variable">B</span></a> := <span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">r</span><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> := <a class="idref" href="fl.int.Intersection.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Intersection.thi3"><span class="id" title="definition">thi3</span></a> (<span class="id" title="var">t</span>: <a class="idref" href="fl.int.Intersection.html#Intersection.Util.Projections.A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Util.Projections.B"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Util.Projections.C"><span class="id" title="variable">C</span></a>): <a class="idref" href="fl.int.Intersection.html#Intersection.Util.Projections.C"><span class="id" title="variable">C</span></a> := <span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">to</span><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> := <a class="idref" href="fl.int.Intersection.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">to</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="fl.int.Intersection.html#Intersection.Util.Projections"><span class="id" title="section">Projections</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a name="Intersection.Util.Packing"><span class="id" title="section">Packing</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Intersection.unVar"><span class="id" title="definition">unVar</span></a> {<span class="id" title="var">Vt</span>: <span class="id" title="keyword">Type</span>} (<span class="id" title="var">v</span>: @<a class="idref" href="fl.cfg.Definitions.html#Definitions.var"><span class="id" title="inductive">var</span></a> <a class="idref" href="fl.int.Intersection.html#Vt"><span class="id" title="variable">Vt</span></a>) := <span class="id" title="keyword">let</span> '(<a class="idref" href="fl.cfg.Definitions.html#Definitions.V"><span class="id" title="constructor">V</span></a> <span class="id" title="var">e</span>) := <a class="idref" href="fl.int.Intersection.html#v"><span class="id" title="variable">v</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">e</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a name="Intersection.Util.Packing.ToWordFunction"><span class="id" title="section">ToWordFunction</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">T</span> <span class="id" title="var">V</span>: <span class="id" title="keyword">Type</span>}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a name="Intersection.to_word"><span class="id" title="definition">to_word</span></a> (<span class="id" title="var">phrase</span>: @<a class="idref" href="fl.cfg.Definitions.html#Definitions.phrase"><span class="id" title="definition">phrase</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Util.Packing.ToWordFunction.T"><span class="id" title="variable">T</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Util.Packing.ToWordFunction.V"><span class="id" title="variable">V</span></a>): <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="fl.cfg.Definitions.html#Definitions.ter"><span class="id" title="inductive">ter</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="fl.int.Intersection.html#phrase"><span class="id" title="variable">phrase</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="fl.cfg.Definitions.html#Definitions.Ts"><span class="id" title="constructor">Ts</span></a> <span class="id" title="var">x</span> <a class="idref" href="https://math-comp.github.io/math-comp/htmldoc/mathcomp.ssreflect.seq.html#d7fed0909a58e41c49e3ee117361b0a5"><span class="id" title="notation">::</span></a> <span class="id" title="var">sx</span> ⇒ <span class="id" title="var">x</span> <a class="idref" href="https://math-comp.github.io/math-comp/htmldoc/mathcomp.ssreflect.seq.html#d7fed0909a58e41c49e3ee117361b0a5"><span class="id" title="notation">::</span></a> <a class="idref" href="fl.int.Intersection.html#to_word"><span class="id" title="definition">to_word</span></a> <span class="id" title="var">sx</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Lists.List.html#145bedf8a5d4a541831f3f70db03085c"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="Intersection.to_word_to_phraseK"><span class="id" title="lemma">to_word_to_phraseK</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">word</span>, <a class="idref" href="fl.int.Intersection.html#Intersection.to_word"><span class="id" title="definition">to_word</span></a> (<a class="idref" href="fl.int.Base2.html#Base.to_phrase"><span class="id" title="definition">to_phrase</span></a> <a class="idref" href="fl.int.Intersection.html#word"><span class="id" title="variable">word</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="fl.int.Intersection.html#word"><span class="id" title="variable">word</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="fl.int.Intersection.html#Intersection.Util.Packing.ToWordFunction"><span class="id" title="section">ToWordFunction</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a name="Intersection.Util.Packing.EqSection"><span class="id" title="section">EqSection</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">T</span> <span class="id" title="var">V1</span> <span class="id" title="var">V2</span>: <span class="id" title="keyword">Type</span>}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a name="Intersection.Util.Packing.EqSection.F"><span class="id" title="variable">F</span></a>: <a class="idref" href="fl.int.Intersection.html#Intersection.Util.Packing.EqSection.V1"><span class="id" title="variable">V1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Util.Packing.EqSection.V2"><span class="id" title="variable">V2</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Intersection.trans_var"><span class="id" title="definition">trans_var</span></a> <span class="id" title="var">v</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="fl.cfg.Definitions.html#Definitions.V"><span class="id" title="constructor">V</span></a> (<a class="idref" href="fl.int.Intersection.html#Intersection.Util.Packing.EqSection.F"><span class="id" title="variable">F</span></a> (<a class="idref" href="fl.int.Intersection.html#Intersection.unVar"><span class="id" title="definition">unVar</span></a> <a class="idref" href="fl.int.Intersection.html#v"><span class="id" title="variable">v</span></a>)).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Intersection.trans_symb"><span class="id" title="definition">trans_symb</span></a> <span class="id" title="var">symb</span>: @<a class="idref" href="fl.cfg.Definitions.html#Definitions.symbol"><span class="id" title="inductive">symbol</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Util.Packing.EqSection.T"><span class="id" title="variable">T</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Util.Packing.EqSection.V2"><span class="id" title="variable">V2</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="fl.int.Intersection.html#symb"><span class="id" title="variable">symb</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="fl.cfg.Definitions.html#Definitions.Ts"><span class="id" title="constructor">Ts</span></a> <span class="id" title="var">t</span> ⇒ <a class="idref" href="fl.cfg.Definitions.html#Definitions.Ts"><span class="id" title="constructor">Ts</span></a> <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="fl.cfg.Definitions.html#Definitions.Vs"><span class="id" title="constructor">Vs</span></a> <span class="id" title="var">v</span> ⇒ <a class="idref" href="fl.cfg.Definitions.html#Definitions.Vs"><span class="id" title="constructor">Vs</span></a> (<a class="idref" href="fl.int.Intersection.html#Intersection.trans_var"><span class="id" title="definition">trans_var</span></a> <span class="id" title="var">v</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Intersection.trans_phrase"><span class="id" title="definition">trans_phrase</span></a> <span class="id" title="var">p</span>: @<a class="idref" href="fl.cfg.Definitions.html#Definitions.phrase"><span class="id" title="definition">phrase</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Util.Packing.EqSection.T"><span class="id" title="variable">T</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Util.Packing.EqSection.V2"><span class="id" title="variable">V2</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://math-comp.github.io/math-comp/htmldoc/mathcomp.ssreflect.seq.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.trans_symb"><span class="id" title="definition">trans_symb</span></a> <a class="idref" href="fl.int.Intersection.html#p"><span class="id" title="variable">p</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="fl.int.Intersection.html#Intersection.Util.Packing.EqSection"><span class="id" title="section">EqSection</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="fl.int.Intersection.html#Intersection.Util.Packing"><span class="id" title="section">Packing</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a name="Intersection.Util.TerminalProp"><span class="id" title="section">TerminalProp</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">T</span> <span class="id" title="var">V</span>: <span class="id" title="keyword">Type</span>}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a name="Intersection.Util.TerminalProp.word"><span class="id" title="variable">word</span></a> <a name="Intersection.Util.TerminalProp.word1"><span class="id" title="variable">word1</span></a> <a name="Intersection.Util.TerminalProp.word2"><span class="id" title="variable">word2</span></a>: @<a class="idref" href="fl.cfg.Definitions.html#Definitions.phrase"><span class="id" title="definition">phrase</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Util.TerminalProp.T"><span class="id" title="variable">T</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Util.TerminalProp.V"><span class="id" title="variable">V</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="Intersection.word_remains_terminal"><span class="id" title="lemma">word_remains_terminal</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">word</span>, <a class="idref" href="fl.cfg.Derivation.html#Derivation.terminal"><span class="id" title="definition">terminal</span></a> (@<a class="idref" href="fl.int.Base2.html#Base.to_phrase"><span class="id" title="definition">to_phrase</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Util.TerminalProp.T"><span class="id" title="variable">T</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Util.TerminalProp.V"><span class="id" title="variable">V</span></a> <a class="idref" href="fl.int.Intersection.html#word"><span class="id" title="variable">word</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="Intersection.to_word_cat"><span class="id" title="lemma">to_word_cat</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="fl.cfg.Derivation.html#Derivation.terminal"><span class="id" title="definition">terminal</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Util.TerminalProp.word1"><span class="id" title="variable">word1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="fl.cfg.Derivation.html#Derivation.terminal"><span class="id" title="definition">terminal</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Util.TerminalProp.word2"><span class="id" title="variable">word2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="fl.int.Intersection.html#Intersection.to_word"><span class="id" title="definition">to_word</span></a> (<a class="idref" href="fl.int.Intersection.html#Intersection.Util.TerminalProp.word1"><span class="id" title="variable">word1</span></a> <a class="idref" href="https://math-comp.github.io/math-comp/htmldoc/mathcomp.ssreflect.seq.html#2ac9001c05ad5bd2f6d5f68e59f48fbb"><span class="id" title="notation">++</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Util.TerminalProp.word2"><span class="id" title="variable">word2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.to_word"><span class="id" title="definition">to_word</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Util.TerminalProp.word1"><span class="id" title="variable">word1</span></a> <a class="idref" href="https://math-comp.github.io/math-comp/htmldoc/mathcomp.ssreflect.seq.html#2ac9001c05ad5bd2f6d5f68e59f48fbb"><span class="id" title="notation">++</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.to_word"><span class="id" title="definition">to_word</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Util.TerminalProp.word2"><span class="id" title="variable">word2</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="fl.int.Intersection.html#Intersection.Util.TerminalProp"><span class="id" title="section">TerminalProp</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a name="Intersection.Util.Normalize"><span class="id" title="section">Normalize</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">Tt</span> <span class="id" title="var">Vt</span>: <a class="idref" href="https://math-comp.github.io/math-comp/htmldoc/mathcomp.ssreflect.eqtype.html#Equality.Exports.eqType"><span class="id" title="abbreviation">eqType</span></a>}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <a name="Intersection.Util.Normalize.H_T_eq_dec"><span class="id" title="variable">H_T_eq_dec</span></a>: <a class="idref" href="fl.cfg.Base.html#c1731816e3fe7dbb40e25e75f2002544"><span class="id" title="notation">eq_dec</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Util.Normalize.Tt"><span class="id" title="variable">Tt</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <a name="Intersection.Util.Normalize.H_V_eq_dec"><span class="id" title="variable">H_V_eq_dec</span></a>: <a class="idref" href="fl.cfg.Base.html#c1731816e3fe7dbb40e25e75f2002544"><span class="id" title="notation">eq_dec</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Util.Normalize.Vt"><span class="id" title="variable">Vt</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a name="Intersection.Util.Normalize.TToNat"><span class="id" title="variable">TToNat</span></a>: <a class="idref" href="fl.int.Intersection.html#Intersection.Util.Normalize.Tt"><span class="id" title="variable">Tt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a name="Intersection.Util.Normalize.UToNat"><span class="id" title="variable">UToNat</span></a>: <a class="idref" href="fl.int.Intersection.html#Intersection.Util.Normalize.Vt"><span class="id" title="variable">Vt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a name="Intersection.Util.Normalize.NatToU"><span class="id" title="variable">NatToU</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Util.Normalize.Vt"><span class="id" title="variable">Vt</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <a name="Intersection.Util.Normalize.bijection"><span class="id" title="variable">bijection</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>, <a class="idref" href="fl.int.Intersection.html#Intersection.Util.Normalize.UToNat"><span class="id" title="variable">UToNat</span></a> (<a class="idref" href="fl.int.Intersection.html#Intersection.Util.Normalize.NatToU"><span class="id" title="variable">NatToU</span></a> <a class="idref" href="fl.int.Intersection.html#x"><span class="id" title="variable">x</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="fl.int.Intersection.html#x"><span class="id" title="variable">x</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Consider&nbsp;an&nbsp;arbitrary&nbsp;grammar&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a name="Intersection.Util.Normalize.G"><span class="id" title="variable">G</span></a>: @<a class="idref" href="fl.cfg.Definitions.html#Definitions.grammar"><span class="id" title="definition">grammar</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Util.Normalize.Tt"><span class="id" title="variable">Tt</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Util.Normalize.Vt"><span class="id" title="variable">Vt</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a name="Intersection.Util.Normalize.S"><span class="id" title="variable">S</span></a>: @<a class="idref" href="fl.cfg.Definitions.html#Definitions.var"><span class="id" title="inductive">var</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Util.Normalize.Vt"><span class="id" title="variable">Vt</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <a name="Intersection.Util.Normalize.H_S_el_of_G"><span class="id" title="variable">H_S_el_of_G</span></a>: <a class="idref" href="fl.cfg.Definitions.html#Definitions.Vs"><span class="id" title="constructor">Vs</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Util.Normalize.S"><span class="id" title="variable">S</span></a> <a class="idref" href="fl.cfg.Base.html#222c7b239caf3441a28b1c01e5e62c07"><span class="id" title="notation">el</span></a> <a class="idref" href="fl.cfg.Symbols.html#Symbols.dom"><span class="id" title="definition">dom</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Util.Normalize.G"><span class="id" title="variable">G</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Let</span> <a name="Intersection.Util.Normalize.normalize"><span class="id" title="variable">normalize</span></a> <span class="id" title="var">G</span> := @<a class="idref" href="fl.cfg.Chomsky.html#Chomsky.normalize"><span class="id" title="definition">normalize</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Util.Normalize.Tt"><span class="id" title="variable">Tt</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Util.Normalize.Vt"><span class="id" title="variable">Vt</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="fl.int.Intersection.html#Intersection.Util.Normalize.TToNat"><span class="id" title="variable">TToNat</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Util.Normalize.UToNat"><span class="id" title="variable">UToNat</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Util.Normalize.NatToU"><span class="id" title="variable">NatToU</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Util.Normalize.bijection"><span class="id" title="variable">bijection</span></a> <a class="idref" href="fl.int.Intersection.html#G"><span class="id" title="variable">G</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="Intersection.epsilon_is_not_derivable_in_normalized_grammar"><span class="id" title="lemma">epsilon_is_not_derivable_in_normalized_grammar</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">¬</span></a> <a class="idref" href="fl.cfg.Derivation.html#Derivation.language"><span class="id" title="definition">language</span></a> (<a class="idref" href="fl.int.Intersection.html#Intersection.Util.Normalize.normalize"><span class="id" title="variable">normalize</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Util.Normalize.G"><span class="id" title="variable">G</span></a>) <a class="idref" href="fl.int.Intersection.html#Intersection.Util.Normalize.S"><span class="id" title="variable">S</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Lists.List.html#145bedf8a5d4a541831f3f70db03085c"><span class="id" title="notation">[]</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="fl.int.Intersection.html#Intersection.Util.Normalize"><span class="id" title="section">Normalize</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a name="Intersection.Util.EpsilonGrammar"><span class="id" title="section">EpsilonGrammar</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">Tt</span> <span class="id" title="var">Vt</span>: <span class="id" title="keyword">Type</span>}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <a name="Intersection.Util.EpsilonGrammar.H_syntactic_analysis"><span class="id" title="variable">H_syntactic_analysis</span></a>: <a class="idref" href="fl.int.ChomskyInduction.html#ChomskyInduction.syntactic_analysis_is_possible"><span class="id" title="definition">syntactic_analysis_is_possible</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Grammar&nbsp;which&nbsp;has&nbsp;only&nbsp;one&nbsp;epsilon&nbsp;rule.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a name="Intersection.Util.EpsilonGrammar.var"><span class="id" title="variable">var</span></a>: @<a class="idref" href="fl.cfg.Definitions.html#Definitions.var"><span class="id" title="inductive">var</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Util.EpsilonGrammar.Vt"><span class="id" title="variable">Vt</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Let</span> <a name="Intersection.Util.EpsilonGrammar.epsilon_grammar"><span class="id" title="variable">epsilon_grammar</span></a>: @<a class="idref" href="fl.cfg.Definitions.html#Definitions.grammar"><span class="id" title="definition">grammar</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Util.EpsilonGrammar.Tt"><span class="id" title="variable">Tt</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Util.EpsilonGrammar.Vt"><span class="id" title="variable">Vt</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Lists.List.html#64ee52ab9627fca8d637e2f1207a2990"><span class="id" title="notation">[</span></a><a class="idref" href="fl.cfg.Definitions.html#Definitions.R"><span class="id" title="constructor">R</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Util.EpsilonGrammar.var"><span class="id" title="variable">var</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Lists.List.html#145bedf8a5d4a541831f3f70db03085c"><span class="id" title="notation">[]</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Lists.List.html#64ee52ab9627fca8d637e2f1207a2990"><span class="id" title="notation">]</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="Intersection.non_epsilon_is_not_derivable_in_epsilon_grammar"><span class="id" title="lemma">non_epsilon_is_not_derivable_in_epsilon_grammar</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">ter</span> <span class="id" title="var">word</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">¬</span></a> <a class="idref" href="fl.cfg.Derivation.html#Derivation.der"><span class="id" title="inductive">der</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Util.EpsilonGrammar.epsilon_grammar"><span class="id" title="variable">epsilon_grammar</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Util.EpsilonGrammar.var"><span class="id" title="variable">var</span></a> (<a class="idref" href="fl.cfg.Definitions.html#Definitions.Ts"><span class="id" title="constructor">Ts</span></a> <a class="idref" href="fl.int.Intersection.html#ter"><span class="id" title="variable">ter</span></a> <a class="idref" href="https://math-comp.github.io/math-comp/htmldoc/mathcomp.ssreflect.seq.html#d7fed0909a58e41c49e3ee117361b0a5"><span class="id" title="notation">::</span></a> <a class="idref" href="fl.int.Base2.html#Base.to_phrase"><span class="id" title="definition">to_phrase</span></a> <a class="idref" href="fl.int.Intersection.html#word"><span class="id" title="variable">word</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="fl.int.Intersection.html#Intersection.Util.EpsilonGrammar"><span class="id" title="section">EpsilonGrammar</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="fl.int.Intersection.html#Intersection.Util"><span class="id" title="section">Util</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab2"></a><h1 class="section">Definitions and lemmas</h1>
 In this section we define a function that creates a intersection-grammar and prove the necessary lemmas. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a name="Intersection.Lemmas"><span class="id" title="section">Lemmas</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a name="Intersection.Lemmas.Tt"><span class="id" title="variable">Tt</span></a> <a name="Intersection.Lemmas.Vt"><span class="id" title="variable">Vt</span></a>: <span class="id" title="keyword">Type</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;In&nbsp;this&nbsp;section&nbsp;we&nbsp;define&nbsp;a&nbsp;function&nbsp;which&nbsp;generates&nbsp;a&nbsp;list&nbsp;of&nbsp;states.&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;list&nbsp;of&nbsp;states&nbsp;represents&nbsp;a&nbsp;set&nbsp;of&nbsp;states&nbsp;of&nbsp;a&nbsp;dfa.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a name="Intersection.Lemmas.DFAListOfStates"><span class="id" title="section">DFAListOfStates</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a name="Intersection.values_list_gen"><span class="id" title="definition">values_list_gen</span></a> <span class="id" title="var">number_of_states</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Vectors.Fin.html#t"><span class="id" title="inductive">t</span></a> <a class="idref" href="fl.int.Intersection.html#number_of_states"><span class="id" title="variable">number_of_states</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="fl.int.Intersection.html#number_of_states"><span class="id" title="variable">number_of_states</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#O"><span class="id" title="constructor">O</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n'</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Vectors.Fin.html#F1"><span class="id" title="constructor">F1</span></a> <a class="idref" href="https://math-comp.github.io/math-comp/htmldoc/mathcomp.ssreflect.seq.html#d7fed0909a58e41c49e3ee117361b0a5"><span class="id" title="notation">::</span></a> <a class="idref" href="https://math-comp.github.io/math-comp/htmldoc/mathcomp.ssreflect.seq.html#d7fed0909a58e41c49e3ee117361b0a5"><span class="id" title="notation">(</span></a><a class="idref" href="https://math-comp.github.io/math-comp/htmldoc/mathcomp.ssreflect.seq.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Vectors.Fin.html#FS"><span class="id" title="constructor">FS</span></a> (<a class="idref" href="fl.int.Intersection.html#values_list_gen"><span class="id" title="definition">values_list_gen</span></a> <span class="id" title="var">n'</span>)<a class="idref" href="https://math-comp.github.io/math-comp/htmldoc/mathcomp.ssreflect.seq.html#d7fed0909a58e41c49e3ee117361b0a5"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <a name="Intersection.all_values_in_list"><span class="id" title="lemma">all_values_in_list</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<span class="id" title="var">number_of_states</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<span class="id" title="var">state</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Vectors.Fin.html#t"><span class="id" title="inductive">t</span></a> <a class="idref" href="fl.int.Intersection.html#number_of_states"><span class="id" title="variable">number_of_states</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="fl.int.Intersection.html#state"><span class="id" title="variable">state</span></a> <a class="idref" href="fl.cfg.Base.html#222c7b239caf3441a28b1c01e5e62c07"><span class="id" title="notation">el</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.values_list_gen"><span class="id" title="definition">values_list_gen</span></a> <a class="idref" href="fl.int.Intersection.html#number_of_states"><span class="id" title="variable">number_of_states</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.DFAListOfStates"><span class="id" title="section">DFAListOfStates</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Consider&nbsp;some&nbsp;list&nbsp;of&nbsp;dfa&nbsp;states.&nbsp;The&nbsp;dfa&nbsp;itself&nbsp;we&nbsp;will&nbsp;use&nbsp;later&nbsp;in&nbsp;this&nbsp;file.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a name="Intersection.Lemmas.number_of_states"><span class="id" title="variable">number_of_states</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Let</span> <a name="Intersection.Lemmas.DfaState"><span class="id" title="variable">DfaState</span></a>: <span class="id" title="keyword">Type</span> := <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Vectors.Fin.html#t"><span class="id" title="inductive">t</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.number_of_states"><span class="id" title="variable">number_of_states</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Let</span> <a name="Intersection.Lemmas.list_of_states"><span class="id" title="variable">list_of_states</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.DfaState"><span class="id" title="variable">DfaState</span></a> := <a class="idref" href="fl.int.Intersection.html#Intersection.values_list_gen"><span class="id" title="definition">values_list_gen</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.number_of_states"><span class="id" title="variable">number_of_states</span></a>.<br/>

<br/>
</div>

<div class="doc">
In this section we define a function that creates a intersection-grammar out of a list of grammars and DFA.  
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a name="Intersection.Lemmas.Conversion"><span class="id" title="section">Conversion</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">T1</span> <span class="id" title="var">T2</span>: <span class="id" title="keyword">Type</span>}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Let</span> <a name="Intersection.Lemmas.Conversion.TripleRule"><span class="id" title="variable">TripleRule</span></a> := @<a class="idref" href="fl.cfg.Definitions.html#Definitions.rule"><span class="id" title="inductive">rule</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.Conversion.T1"><span class="id" title="variable">T1</span></a> (<a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.DfaState"><span class="id" title="variable">DfaState</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> @<a class="idref" href="fl.cfg.Definitions.html#Definitions.var"><span class="id" title="inductive">var</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.Conversion.T2"><span class="id" title="variable">T2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.DfaState"><span class="id" title="variable">DfaState</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Intersection.convert_nonterm_rule_2"><span class="id" title="definition">convert_nonterm_rule_2</span></a> (<span class="id" title="var">r</span> <span class="id" title="var">r1</span> <span class="id" title="var">r2</span>: <span class="id" title="var">_</span>) (<span class="id" title="var">s1</span> <span class="id" title="var">s2</span> : <span class="id" title="var">_</span>): <a class="idref" href="https://math-comp.github.io/math-comp/htmldoc/mathcomp.ssreflect.seq.html#seq"><span class="id" title="abbreviation">seq</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.Conversion.TripleRule"><span class="id" title="variable">TripleRule</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://math-comp.github.io/math-comp/htmldoc/mathcomp.ssreflect.seq.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">s3</span> ⇒ <a class="idref" href="fl.cfg.Definitions.html#Definitions.R"><span class="id" title="constructor">R</span></a> (<a class="idref" href="fl.cfg.Definitions.html#Definitions.V"><span class="id" title="constructor">V</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="fl.int.Intersection.html#s1"><span class="id" title="variable">s1</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#r"><span class="id" title="variable">r</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#s3"><span class="id" title="variable">s3</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">[</span></a><a class="idref" href="fl.cfg.Definitions.html#Definitions.Vs"><span class="id" title="constructor">Vs</span></a> (<a class="idref" href="fl.cfg.Definitions.html#Definitions.V"><span class="id" title="constructor">V</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="fl.int.Intersection.html#s1"><span class="id" title="variable">s1</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#r1"><span class="id" title="variable">r1</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#s2"><span class="id" title="variable">s2</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">;</span></a> <a class="idref" href="fl.cfg.Definitions.html#Definitions.Vs"><span class="id" title="constructor">Vs</span></a> (<a class="idref" href="fl.cfg.Definitions.html#Definitions.V"><span class="id" title="constructor">V</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="fl.int.Intersection.html#s2"><span class="id" title="variable">s2</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#r2"><span class="id" title="variable">r2</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#s3"><span class="id" title="variable">s3</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">]</span></a>) <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.list_of_states"><span class="id" title="variable">list_of_states</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Intersection.convert_nonterm_rule_1"><span class="id" title="definition">convert_nonterm_rule_1</span></a>  (<span class="id" title="var">r</span> <span class="id" title="var">r1</span> <span class="id" title="var">r2</span>: <span class="id" title="var">_</span>) (<span class="id" title="var">s1</span> : <span class="id" title="var">_</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Lists.List.html#flat_map"><span class="id" title="definition">flat_map</span></a> (<a class="idref" href="fl.int.Intersection.html#Intersection.convert_nonterm_rule_2"><span class="id" title="definition">convert_nonterm_rule_2</span></a> <a class="idref" href="fl.int.Intersection.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="fl.int.Intersection.html#r1"><span class="id" title="variable">r1</span></a> <a class="idref" href="fl.int.Intersection.html#r2"><span class="id" title="variable">r2</span></a> <a class="idref" href="fl.int.Intersection.html#s1"><span class="id" title="variable">s1</span></a>) <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.list_of_states"><span class="id" title="variable">list_of_states</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Intersection.convert_nonterm_rule"><span class="id" title="definition">convert_nonterm_rule</span></a> (<span class="id" title="var">r</span> <span class="id" title="var">r1</span> <span class="id" title="var">r2</span>: <span class="id" title="var">_</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Lists.List.html#flat_map"><span class="id" title="definition">flat_map</span></a> (<a class="idref" href="fl.int.Intersection.html#Intersection.convert_nonterm_rule_1"><span class="id" title="definition">convert_nonterm_rule_1</span></a> <a class="idref" href="fl.int.Intersection.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="fl.int.Intersection.html#r1"><span class="id" title="variable">r1</span></a> <a class="idref" href="fl.int.Intersection.html#r2"><span class="id" title="variable">r2</span></a>) <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.list_of_states"><span class="id" title="variable">list_of_states</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Intersection.convert_terminal_rule"><span class="id" title="definition">convert_terminal_rule</span></a> (<span class="id" title="var">next</span>: <span class="id" title="var">_</span>) (<span class="id" title="var">r</span>: <span class="id" title="var">_</span>) (<span class="id" title="var">t</span>: <span class="id" title="var">_</span>): <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.Conversion.TripleRule"><span class="id" title="variable">TripleRule</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://math-comp.github.io/math-comp/htmldoc/mathcomp.ssreflect.seq.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">s1</span> ⇒ <a class="idref" href="fl.cfg.Definitions.html#Definitions.R"><span class="id" title="constructor">R</span></a> (<a class="idref" href="fl.cfg.Definitions.html#Definitions.V"><span class="id" title="constructor">V</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="fl.int.Intersection.html#s1"><span class="id" title="variable">s1</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#r"><span class="id" title="variable">r</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#next"><span class="id" title="variable">next</span></a> <a class="idref" href="fl.int.Intersection.html#s1"><span class="id" title="variable">s1</span></a> <a class="idref" href="fl.int.Intersection.html#t"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Lists.List.html#64ee52ab9627fca8d637e2f1207a2990"><span class="id" title="notation">[</span></a><a class="idref" href="fl.cfg.Definitions.html#Definitions.Ts"><span class="id" title="constructor">Ts</span></a> <a class="idref" href="fl.int.Intersection.html#t"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Lists.List.html#64ee52ab9627fca8d637e2f1207a2990"><span class="id" title="notation">]</span></a>) <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.list_of_states"><span class="id" title="variable">list_of_states</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Intersection.convert_rule"><span class="id" title="definition">convert_rule</span></a> (<span class="id" title="var">next</span>: <span class="id" title="var">_</span>) (<span class="id" title="var">r</span>: <span class="id" title="var">_</span> ) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="fl.int.Intersection.html#r"><span class="id" title="variable">r</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="fl.cfg.Definitions.html#Definitions.R"><span class="id" title="constructor">R</span></a> <span class="id" title="var">r</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">[</span></a><a class="idref" href="fl.cfg.Definitions.html#Definitions.Vs"><span class="id" title="constructor">Vs</span></a> <span class="id" title="var">r1</span><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">;</span></a> <a class="idref" href="fl.cfg.Definitions.html#Definitions.Vs"><span class="id" title="constructor">Vs</span></a> <span class="id" title="var">r2</span><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">]</span></a> ⇒ <a class="idref" href="fl.int.Intersection.html#Intersection.convert_nonterm_rule"><span class="id" title="definition">convert_nonterm_rule</span></a> <a class="idref" href="fl.int.Intersection.html#r"><span class="id" title="variable">r</span></a> <span class="id" title="var">r1</span> <span class="id" title="var">r2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="fl.cfg.Definitions.html#Definitions.R"><span class="id" title="constructor">R</span></a> <span class="id" title="var">r</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Lists.List.html#64ee52ab9627fca8d637e2f1207a2990"><span class="id" title="notation">[</span></a><a class="idref" href="fl.cfg.Definitions.html#Definitions.Ts"><span class="id" title="constructor">Ts</span></a> <span class="id" title="var">t</span><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Lists.List.html#64ee52ab9627fca8d637e2f1207a2990"><span class="id" title="notation">]</span></a> ⇒ <a class="idref" href="fl.int.Intersection.html#Intersection.convert_terminal_rule"><span class="id" title="definition">convert_terminal_rule</span></a> <a class="idref" href="fl.int.Intersection.html#next"><span class="id" title="variable">next</span></a> <a class="idref" href="fl.int.Intersection.html#r"><span class="id" title="variable">r</span></a> <span class="id" title="var">t</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span>  ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Lists.List.html#145bedf8a5d4a541831f3f70db03085c"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Intersection.convert_rules"><span class="id" title="definition">convert_rules</span></a> (<span class="id" title="var">rules</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="fl.cfg.Definitions.html#Definitions.rule"><span class="id" title="inductive">rule</span></a>) (<span class="id" title="var">next</span>: <span class="id" title="var">_</span>): <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="fl.cfg.Definitions.html#Definitions.rule"><span class="id" title="inductive">rule</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Lists.List.html#flat_map"><span class="id" title="definition">flat_map</span></a> (<a class="idref" href="fl.int.Intersection.html#Intersection.convert_rule"><span class="id" title="definition">convert_rule</span></a> <a class="idref" href="fl.int.Intersection.html#next"><span class="id" title="variable">next</span></a>) <a class="idref" href="fl.int.Intersection.html#rules"><span class="id" title="variable">rules</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Intersection.convert_grammar"><span class="id" title="definition">convert_grammar</span></a> (<span class="id" title="var">g</span>: <a class="idref" href="fl.cfg.Definitions.html#Definitions.grammar"><span class="id" title="definition">grammar</span></a>) (<span class="id" title="var">s_dfa</span>: <a class="idref" href="fl.int.DFA.html#DFA.s_dfa"><span class="id" title="record">s_dfa</span></a>): @<a class="idref" href="fl.cfg.Definitions.html#Definitions.grammar"><span class="id" title="definition">grammar</span></a> <span class="id" title="var">_</span> (<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <span class="id" title="var">_</span>):=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="fl.int.Intersection.html#Intersection.convert_rules"><span class="id" title="definition">convert_rules</span></a> <a class="idref" href="fl.int.Intersection.html#g"><span class="id" title="variable">g</span></a> (<a class="idref" href="fl.int.DFA.html#DFA.s_next"><span class="id" title="projection">s_next</span></a> <a class="idref" href="fl.int.Intersection.html#s_dfa"><span class="id" title="variable">s_dfa</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.Conversion"><span class="id" title="section">Conversion</span></a>.<br/>

<br/>
</div>

<div class="doc">
Next, we prove a few useful lemmas about the conversion function. 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;In&nbsp;this&nbsp;section&nbsp;we&nbsp;prove&nbsp;that&nbsp;if&nbsp;an&nbsp;initial&nbsp;grammar&nbsp;contains&nbsp;some&nbsp;terminal&nbsp;rule,&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;then&nbsp;the&nbsp;triple&nbsp;grammar&nbsp;contains&nbsp;the&nbsp;corresponding&nbsp;triple&nbsp;rule.&nbsp;We&nbsp;can&nbsp;simply&nbsp;get<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;triple&nbsp;rule&nbsp;using&nbsp;application&nbsp;of&nbsp;the&nbsp;"convert_rule"&nbsp;function.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a name="Intersection.Lemmas.ForwardTerminalRuleInclusion"><span class="id" title="section">ForwardTerminalRuleInclusion</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a name="Intersection.Lemmas.ForwardTerminalRuleInclusion.G"><span class="id" title="variable">G</span></a>: @<a class="idref" href="fl.cfg.Definitions.html#Definitions.grammar"><span class="id" title="definition">grammar</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.Tt"><span class="id" title="variable">Tt</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.Vt"><span class="id" title="variable">Vt</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;We&nbsp;prove&nbsp;the&nbsp;lemma&nbsp;using&nbsp;the&nbsp;induction&nbsp;by&nbsp;the&nbsp;grammar&nbsp;(list&nbsp;of&nbsp;rules).&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(1)&nbsp;"Base"&nbsp;case&nbsp;is&nbsp;trivial&nbsp;(G&nbsp;=&nbsp;[]).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(2)&nbsp;"Step"&nbsp;case&nbsp;splits&nbsp;into&nbsp;two&nbsp;subcases&nbsp;(G&nbsp;~&gt;&nbsp;a::G):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a)&nbsp;R&nbsp;r&nbsp;[Ts&nbsp;te]&nbsp;=&nbsp;a:&nbsp;We&nbsp;just&nbsp;unfold&nbsp;definition&nbsp;convert_rules,&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;after&nbsp;some&nbsp;evaluation&nbsp;we&nbsp;will&nbsp;get&nbsp;the&nbsp;identity.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b)&nbsp;R&nbsp;r&nbsp;[Ts&nbsp;te]&nbsp;el&nbsp;G:&nbsp;We&nbsp;use&nbsp;induction&nbsp;hypothesis.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="Intersection.forward_terminal_rule_inclusion"><span class="id" title="lemma">forward_terminal_rule_inclusion</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<span class="id" title="var">r</span>: <a class="idref" href="fl.cfg.Definitions.html#Definitions.var"><span class="id" title="inductive">var</span></a>) (<span class="id" title="var">te</span>: <a class="idref" href="fl.cfg.Definitions.html#Definitions.ter"><span class="id" title="inductive">ter</span></a>) (<span class="id" title="var">next</span>: <span class="id" title="var">_</span>) (<span class="id" title="var">from</span> <span class="id" title="var">to</span>: <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.DfaState"><span class="id" title="variable">DfaState</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="fl.cfg.Definitions.html#Definitions.R"><span class="id" title="constructor">R</span></a> <a class="idref" href="fl.int.Intersection.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Lists.List.html#64ee52ab9627fca8d637e2f1207a2990"><span class="id" title="notation">[</span></a><a class="idref" href="fl.cfg.Definitions.html#Definitions.Ts"><span class="id" title="constructor">Ts</span></a> <a class="idref" href="fl.int.Intersection.html#te"><span class="id" title="variable">te</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Lists.List.html#64ee52ab9627fca8d637e2f1207a2990"><span class="id" title="notation">]</span></a> <a class="idref" href="fl.cfg.Base.html#222c7b239caf3441a28b1c01e5e62c07"><span class="id" title="notation">el</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ForwardTerminalRuleInclusion.G"><span class="id" title="variable">G</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a>  <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="fl.int.Intersection.html#next"><span class="id" title="variable">next</span></a> <a class="idref" href="fl.int.Intersection.html#from"><span class="id" title="variable">from</span></a> <a class="idref" href="fl.int.Intersection.html#te"><span class="id" title="variable">te</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="fl.int.Intersection.html#to"><span class="id" title="variable">to</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="fl.cfg.Definitions.html#Definitions.R"><span class="id" title="constructor">R</span></a> (<a class="idref" href="fl.cfg.Definitions.html#Definitions.V"><span class="id" title="constructor">V</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="fl.int.Intersection.html#from"><span class="id" title="variable">from</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#r"><span class="id" title="variable">r</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#to"><span class="id" title="variable">to</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Lists.List.html#64ee52ab9627fca8d637e2f1207a2990"><span class="id" title="notation">[</span></a><a class="idref" href="fl.cfg.Definitions.html#Definitions.Ts"><span class="id" title="constructor">Ts</span></a> <a class="idref" href="fl.int.Intersection.html#te"><span class="id" title="variable">te</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Lists.List.html#64ee52ab9627fca8d637e2f1207a2990"><span class="id" title="notation">]</span></a> <a class="idref" href="fl.cfg.Base.html#222c7b239caf3441a28b1c01e5e62c07"><span class="id" title="notation">el</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.convert_rules"><span class="id" title="definition">convert_rules</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ForwardTerminalRuleInclusion.G"><span class="id" title="variable">G</span></a> <a class="idref" href="fl.int.Intersection.html#next"><span class="id" title="variable">next</span></a>.<br/>
 
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ForwardTerminalRuleInclusion"><span class="id" title="section">ForwardTerminalRuleInclusion</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;In&nbsp;this&nbsp;section&nbsp;we&nbsp;prove&nbsp;that&nbsp;if&nbsp;an&nbsp;initial&nbsp;grammar&nbsp;contains&nbsp;some&nbsp;nonterminal&nbsp;rule,&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;then&nbsp;the&nbsp;triple&nbsp;grammar&nbsp;contains&nbsp;the&nbsp;corresponding&nbsp;triple&nbsp;rule.&nbsp;We&nbsp;can&nbsp;simply&nbsp;get<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;triple&nbsp;rule&nbsp;using&nbsp;application&nbsp;of&nbsp;the&nbsp;"convert_rule"&nbsp;function.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a name="Intersection.Lemmas.ForwardNonterminalRuleInclusion"><span class="id" title="section">ForwardNonterminalRuleInclusion</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a name="Intersection.Lemmas.ForwardNonterminalRuleInclusion.G"><span class="id" title="variable">G</span></a>: @<a class="idref" href="fl.cfg.Definitions.html#Definitions.grammar"><span class="id" title="definition">grammar</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.Tt"><span class="id" title="variable">Tt</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.Vt"><span class="id" title="variable">Vt</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a name="Intersection.Lemmas.ForwardNonterminalRuleInclusion.next"><span class="id" title="variable">next</span></a>: @<a class="idref" href="fl.int.DFA.html#DFA.dfa_rule"><span class="id" title="definition">dfa_rule</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.DfaState"><span class="id" title="variable">DfaState</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.Tt"><span class="id" title="variable">Tt</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a name="Intersection.Lemmas.ForwardNonterminalRuleInclusion.from"><span class="id" title="variable">from</span></a> <a name="Intersection.Lemmas.ForwardNonterminalRuleInclusion.mid"><span class="id" title="variable">mid</span></a> <a name="Intersection.Lemmas.ForwardNonterminalRuleInclusion.to"><span class="id" title="variable">to</span></a>: <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.DfaState"><span class="id" title="variable">DfaState</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a name="Intersection.Lemmas.ForwardNonterminalRuleInclusion.r"><span class="id" title="variable">r</span></a> <a name="Intersection.Lemmas.ForwardNonterminalRuleInclusion.r1"><span class="id" title="variable">r1</span></a> <a name="Intersection.Lemmas.ForwardNonterminalRuleInclusion.r2"><span class="id" title="variable">r2</span></a>: @<a class="idref" href="fl.cfg.Definitions.html#Definitions.var"><span class="id" title="inductive">var</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.Vt"><span class="id" title="variable">Vt</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Let</span> <a name="Intersection.Lemmas.ForwardNonterminalRuleInclusion.R"><span class="id" title="variable">R</span></a> := @<a class="idref" href="fl.cfg.Definitions.html#Definitions.R"><span class="id" title="constructor">R</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.Tt"><span class="id" title="variable">Tt</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="Intersection.forward_nonterminal_rule_inclusion''"><span class="id" title="lemma">forward_nonterminal_rule_inclusion''</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ForwardNonterminalRuleInclusion.R"><span class="id" title="variable">R</span></a> (<a class="idref" href="fl.cfg.Definitions.html#Definitions.V"><span class="id" title="constructor">V</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ForwardNonterminalRuleInclusion.from"><span class="id" title="variable">from</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ForwardNonterminalRuleInclusion.r"><span class="id" title="variable">r</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ForwardNonterminalRuleInclusion.to"><span class="id" title="variable">to</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">[</span></a><a class="idref" href="fl.cfg.Definitions.html#Definitions.Vs"><span class="id" title="constructor">Vs</span></a> (<a class="idref" href="fl.cfg.Definitions.html#Definitions.V"><span class="id" title="constructor">V</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ForwardNonterminalRuleInclusion.from"><span class="id" title="variable">from</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ForwardNonterminalRuleInclusion.r1"><span class="id" title="variable">r1</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ForwardNonterminalRuleInclusion.mid"><span class="id" title="variable">mid</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">;</span></a> <a class="idref" href="fl.cfg.Definitions.html#Definitions.Vs"><span class="id" title="constructor">Vs</span></a> (<a class="idref" href="fl.cfg.Definitions.html#Definitions.V"><span class="id" title="constructor">V</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ForwardNonterminalRuleInclusion.mid"><span class="id" title="variable">mid</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ForwardNonterminalRuleInclusion.r2"><span class="id" title="variable">r2</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ForwardNonterminalRuleInclusion.to"><span class="id" title="variable">to</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">]</span></a> <a class="idref" href="fl.cfg.Base.html#222c7b239caf3441a28b1c01e5e62c07"><span class="id" title="notation">el</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="fl.int.Intersection.html#Intersection.convert_nonterm_rule_2"><span class="id" title="definition">convert_nonterm_rule_2</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ForwardNonterminalRuleInclusion.r"><span class="id" title="variable">r</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ForwardNonterminalRuleInclusion.r1"><span class="id" title="variable">r1</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ForwardNonterminalRuleInclusion.r2"><span class="id" title="variable">r2</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ForwardNonterminalRuleInclusion.from"><span class="id" title="variable">from</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ForwardNonterminalRuleInclusion.mid"><span class="id" title="variable">mid</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="Intersection.forward_nonterminal_rule_inclusion'"><span class="id" title="lemma">forward_nonterminal_rule_inclusion'</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ForwardNonterminalRuleInclusion.R"><span class="id" title="variable">R</span></a> (<a class="idref" href="fl.cfg.Definitions.html#Definitions.V"><span class="id" title="constructor">V</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ForwardNonterminalRuleInclusion.from"><span class="id" title="variable">from</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ForwardNonterminalRuleInclusion.r"><span class="id" title="variable">r</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ForwardNonterminalRuleInclusion.to"><span class="id" title="variable">to</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">[</span></a><a class="idref" href="fl.cfg.Definitions.html#Definitions.Vs"><span class="id" title="constructor">Vs</span></a> (<a class="idref" href="fl.cfg.Definitions.html#Definitions.V"><span class="id" title="constructor">V</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ForwardNonterminalRuleInclusion.from"><span class="id" title="variable">from</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ForwardNonterminalRuleInclusion.r1"><span class="id" title="variable">r1</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ForwardNonterminalRuleInclusion.mid"><span class="id" title="variable">mid</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">;</span></a> <a class="idref" href="fl.cfg.Definitions.html#Definitions.Vs"><span class="id" title="constructor">Vs</span></a> (<a class="idref" href="fl.cfg.Definitions.html#Definitions.V"><span class="id" title="constructor">V</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ForwardNonterminalRuleInclusion.mid"><span class="id" title="variable">mid</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ForwardNonterminalRuleInclusion.r2"><span class="id" title="variable">r2</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ForwardNonterminalRuleInclusion.to"><span class="id" title="variable">to</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">]</span></a> <a class="idref" href="fl.cfg.Base.html#222c7b239caf3441a28b1c01e5e62c07"><span class="id" title="notation">el</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="fl.int.Intersection.html#Intersection.convert_nonterm_rule_1"><span class="id" title="definition">convert_nonterm_rule_1</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ForwardNonterminalRuleInclusion.r"><span class="id" title="variable">r</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ForwardNonterminalRuleInclusion.r1"><span class="id" title="variable">r1</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ForwardNonterminalRuleInclusion.r2"><span class="id" title="variable">r2</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ForwardNonterminalRuleInclusion.from"><span class="id" title="variable">from</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;We&nbsp;can&nbsp;prove&nbsp;this&nbsp;lemma&nbsp;simply&nbsp;by&nbsp;induction&nbsp;by&nbsp;grammar&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(as&nbsp;in&nbsp;the&nbsp;case&nbsp;of&nbsp;the&nbsp;lemma&nbsp;forward_terminal_rule_inclusion)&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="Intersection.forward_nonterminal_rule_inclusion"><span class="id" title="lemma">forward_nonterminal_rule_inclusion</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ForwardNonterminalRuleInclusion.R"><span class="id" title="variable">R</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ForwardNonterminalRuleInclusion.r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">[</span></a><a class="idref" href="fl.cfg.Definitions.html#Definitions.Vs"><span class="id" title="constructor">Vs</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ForwardNonterminalRuleInclusion.r1"><span class="id" title="variable">r1</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">;</span></a> <a class="idref" href="fl.cfg.Definitions.html#Definitions.Vs"><span class="id" title="constructor">Vs</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ForwardNonterminalRuleInclusion.r2"><span class="id" title="variable">r2</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">]</span></a> <a class="idref" href="fl.cfg.Base.html#222c7b239caf3441a28b1c01e5e62c07"><span class="id" title="notation">el</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ForwardNonterminalRuleInclusion.G"><span class="id" title="variable">G</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ForwardNonterminalRuleInclusion.R"><span class="id" title="variable">R</span></a> (<a class="idref" href="fl.cfg.Definitions.html#Definitions.V"><span class="id" title="constructor">V</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ForwardNonterminalRuleInclusion.from"><span class="id" title="variable">from</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ForwardNonterminalRuleInclusion.r"><span class="id" title="variable">r</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ForwardNonterminalRuleInclusion.to"><span class="id" title="variable">to</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">[</span></a><a class="idref" href="fl.cfg.Definitions.html#Definitions.Vs"><span class="id" title="constructor">Vs</span></a> (<a class="idref" href="fl.cfg.Definitions.html#Definitions.V"><span class="id" title="constructor">V</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ForwardNonterminalRuleInclusion.from"><span class="id" title="variable">from</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ForwardNonterminalRuleInclusion.r1"><span class="id" title="variable">r1</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ForwardNonterminalRuleInclusion.mid"><span class="id" title="variable">mid</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">;</span></a> <a class="idref" href="fl.cfg.Definitions.html#Definitions.Vs"><span class="id" title="constructor">Vs</span></a> (<a class="idref" href="fl.cfg.Definitions.html#Definitions.V"><span class="id" title="constructor">V</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ForwardNonterminalRuleInclusion.mid"><span class="id" title="variable">mid</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ForwardNonterminalRuleInclusion.r2"><span class="id" title="variable">r2</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ForwardNonterminalRuleInclusion.to"><span class="id" title="variable">to</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">]</span></a> <a class="idref" href="fl.cfg.Base.html#222c7b239caf3441a28b1c01e5e62c07"><span class="id" title="notation">el</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.convert_rules"><span class="id" title="definition">convert_rules</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ForwardNonterminalRuleInclusion.G"><span class="id" title="variable">G</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ForwardNonterminalRuleInclusion.next"><span class="id" title="variable">next</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ForwardNonterminalRuleInclusion"><span class="id" title="section">ForwardNonterminalRuleInclusion</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;In&nbsp;this&nbsp;section&nbsp;we&nbsp;prove&nbsp;that&nbsp;if&nbsp;a&nbsp;triple&nbsp;grammar&nbsp;contains&nbsp;some&nbsp;rule,&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;then&nbsp;the&nbsp;initial&nbsp;grammar&nbsp;contains&nbsp;corresponding&nbsp;"single"&nbsp;rule.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a name="Intersection.Lemmas.BackwardRuleInclusion"><span class="id" title="section">BackwardRuleInclusion</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a name="Intersection.Lemmas.BackwardRuleInclusion.G"><span class="id" title="variable">G</span></a>: @<a class="idref" href="fl.cfg.Definitions.html#Definitions.grammar"><span class="id" title="definition">grammar</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.Tt"><span class="id" title="variable">Tt</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.Vt"><span class="id" title="variable">Vt</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <a name="Intersection.Lemmas.BackwardRuleInclusion.H_G_in_chomsky_normal_form"><span class="id" title="variable">H_G_in_chomsky_normal_form</span></a>: <a class="idref" href="fl.cfg.Chomsky.html#Chomsky.chomsky"><span class="id" title="definition">chomsky</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.BackwardRuleInclusion.G"><span class="id" title="variable">G</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a name="Intersection.Lemmas.BackwardRuleInclusion.next"><span class="id" title="variable">next</span></a>: @<a class="idref" href="fl.int.DFA.html#DFA.dfa_rule"><span class="id" title="definition">dfa_rule</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.DfaState"><span class="id" title="variable">DfaState</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.Tt"><span class="id" title="variable">Tt</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;For&nbsp;simplicity,&nbsp;let's&nbsp;define&nbsp;a&nbsp;local&nbsp;name.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Let</span> <a name="Intersection.Lemmas.BackwardRuleInclusion.projection"><span class="id" title="variable">projection</span></a> (<span class="id" title="var">s</span>: @<a class="idref" href="fl.cfg.Definitions.html#Definitions.symbol"><span class="id" title="inductive">symbol</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.Tt"><span class="id" title="variable">Tt</span></a> (<a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.DfaState"><span class="id" title="variable">DfaState</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="fl.cfg.Definitions.html#Definitions.var"><span class="id" title="inductive">var</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.DfaState"><span class="id" title="variable">DfaState</span></a>)): @<a class="idref" href="fl.cfg.Definitions.html#Definitions.symbol"><span class="id" title="inductive">symbol</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.Tt"><span class="id" title="variable">Tt</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.Vt"><span class="id" title="variable">Vt</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="fl.int.Intersection.html#s"><span class="id" title="variable">s</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="fl.cfg.Definitions.html#Definitions.Vs"><span class="id" title="constructor">Vs</span></a> (<a class="idref" href="fl.cfg.Definitions.html#Definitions.V"><span class="id" title="constructor">V</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">r</span><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>) ⇒ <a class="idref" href="fl.cfg.Definitions.html#Definitions.Vs"><span class="id" title="constructor">Vs</span></a> <span class="id" title="var">r</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="fl.cfg.Definitions.html#Definitions.Ts"><span class="id" title="constructor">Ts</span></a> (<a class="idref" href="fl.cfg.Definitions.html#Definitions.T"><span class="id" title="constructor">T</span></a> <span class="id" title="var">r</span>) ⇒ <a class="idref" href="fl.cfg.Definitions.html#Definitions.Ts"><span class="id" title="constructor">Ts</span></a> (<a class="idref" href="fl.cfg.Definitions.html#Definitions.T"><span class="id" title="constructor">T</span></a> <span class="id" title="var">r</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;We&nbsp;prove&nbsp;that&nbsp;we&nbsp;can&nbsp;simply&nbsp;project&nbsp;a&nbsp;triple&nbsp;rule&nbsp;into&nbsp;an&nbsp;initial&nbsp;one.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="Intersection.backward_rule_inclusion"><span class="id" title="lemma">backward_rule_inclusion</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">rhs</span> <span class="id" title="var">lhs</span>, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="fl.cfg.Definitions.html#Definitions.R"><span class="id" title="constructor">R</span></a> <a class="idref" href="fl.int.Intersection.html#rhs"><span class="id" title="variable">rhs</span></a> <a class="idref" href="fl.int.Intersection.html#lhs"><span class="id" title="variable">lhs</span></a> <a class="idref" href="fl.cfg.Base.html#222c7b239caf3441a28b1c01e5e62c07"><span class="id" title="notation">el</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.convert_rules"><span class="id" title="definition">convert_rules</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.BackwardRuleInclusion.G"><span class="id" title="variable">G</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.BackwardRuleInclusion.next"><span class="id" title="variable">next</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="fl.cfg.Definitions.html#Definitions.R"><span class="id" title="constructor">R</span></a> (<a class="idref" href="fl.int.Intersection.html#Intersection.snd3"><span class="id" title="definition">snd3</span></a> (<a class="idref" href="fl.int.Intersection.html#Intersection.unVar"><span class="id" title="definition">unVar</span></a> <a class="idref" href="fl.int.Intersection.html#rhs"><span class="id" title="variable">rhs</span></a>)) (<a class="idref" href="https://math-comp.github.io/math-comp/htmldoc/mathcomp.ssreflect.seq.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.BackwardRuleInclusion.projection"><span class="id" title="variable">projection</span></a> <a class="idref" href="fl.int.Intersection.html#lhs"><span class="id" title="variable">lhs</span></a>) <a class="idref" href="fl.cfg.Base.html#222c7b239caf3441a28b1c01e5e62c07"><span class="id" title="notation">el</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.BackwardRuleInclusion.G"><span class="id" title="variable">G</span></a>.<br/>
 
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Corollary</span> <a name="Intersection.backward_terminal_rule_inclusion"><span class="id" title="lemma">backward_terminal_rule_inclusion</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">from</span> <span class="id" title="var">r</span> <span class="id" title="var">to</span> <span class="id" title="var">t</span>, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="fl.cfg.Definitions.html#Definitions.R"><span class="id" title="constructor">R</span></a> (<a class="idref" href="fl.cfg.Definitions.html#Definitions.V"><span class="id" title="constructor">V</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="fl.int.Intersection.html#from"><span class="id" title="variable">from</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#r"><span class="id" title="variable">r</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#to"><span class="id" title="variable">to</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Lists.List.html#64ee52ab9627fca8d637e2f1207a2990"><span class="id" title="notation">[</span></a><a class="idref" href="fl.cfg.Definitions.html#Definitions.Ts"><span class="id" title="constructor">Ts</span></a> <a class="idref" href="fl.int.Intersection.html#t"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Lists.List.html#64ee52ab9627fca8d637e2f1207a2990"><span class="id" title="notation">]</span></a> <a class="idref" href="fl.cfg.Base.html#222c7b239caf3441a28b1c01e5e62c07"><span class="id" title="notation">el</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.convert_rules"><span class="id" title="definition">convert_rules</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.BackwardRuleInclusion.G"><span class="id" title="variable">G</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.BackwardRuleInclusion.next"><span class="id" title="variable">next</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="fl.cfg.Definitions.html#Definitions.R"><span class="id" title="constructor">R</span></a> <a class="idref" href="fl.int.Intersection.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Lists.List.html#64ee52ab9627fca8d637e2f1207a2990"><span class="id" title="notation">[</span></a><a class="idref" href="fl.cfg.Definitions.html#Definitions.Ts"><span class="id" title="constructor">Ts</span></a> <a class="idref" href="fl.int.Intersection.html#t"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Lists.List.html#64ee52ab9627fca8d637e2f1207a2990"><span class="id" title="notation">]</span></a> <a class="idref" href="fl.cfg.Base.html#222c7b239caf3441a28b1c01e5e62c07"><span class="id" title="notation">el</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.BackwardRuleInclusion.G"><span class="id" title="variable">G</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Corollary</span> <a name="Intersection.backward_nonterminal_rule_inclusion"><span class="id" title="lemma">backward_nonterminal_rule_inclusion</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">from</span> <span class="id" title="var">from1</span> <span class="id" title="var">from2</span> <span class="id" title="var">r</span> <span class="id" title="var">r1</span> <span class="id" title="var">r2</span> <span class="id" title="var">to</span> <span class="id" title="var">to1</span> <span class="id" title="var">to2</span>, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="fl.cfg.Definitions.html#Definitions.R"><span class="id" title="constructor">R</span></a> (<a class="idref" href="fl.cfg.Definitions.html#Definitions.V"><span class="id" title="constructor">V</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="fl.int.Intersection.html#from"><span class="id" title="variable">from</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#r"><span class="id" title="variable">r</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#to"><span class="id" title="variable">to</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">[</span></a><a class="idref" href="fl.cfg.Definitions.html#Definitions.Vs"><span class="id" title="constructor">Vs</span></a> (<a class="idref" href="fl.cfg.Definitions.html#Definitions.V"><span class="id" title="constructor">V</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="fl.int.Intersection.html#from1"><span class="id" title="variable">from1</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#r1"><span class="id" title="variable">r1</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#to1"><span class="id" title="variable">to1</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">;</span></a> <a class="idref" href="fl.cfg.Definitions.html#Definitions.Vs"><span class="id" title="constructor">Vs</span></a> (<a class="idref" href="fl.cfg.Definitions.html#Definitions.V"><span class="id" title="constructor">V</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="fl.int.Intersection.html#from2"><span class="id" title="variable">from2</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#r2"><span class="id" title="variable">r2</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#to2"><span class="id" title="variable">to2</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="fl.cfg.Base.html#222c7b239caf3441a28b1c01e5e62c07"><span class="id" title="notation">el</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.convert_rules"><span class="id" title="definition">convert_rules</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.BackwardRuleInclusion.G"><span class="id" title="variable">G</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.BackwardRuleInclusion.next"><span class="id" title="variable">next</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="fl.cfg.Definitions.html#Definitions.R"><span class="id" title="constructor">R</span></a> <a class="idref" href="fl.int.Intersection.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">[</span></a><a class="idref" href="fl.cfg.Definitions.html#Definitions.Vs"><span class="id" title="constructor">Vs</span></a> <a class="idref" href="fl.int.Intersection.html#r1"><span class="id" title="variable">r1</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">;</span></a> <a class="idref" href="fl.cfg.Definitions.html#Definitions.Vs"><span class="id" title="constructor">Vs</span></a> <a class="idref" href="fl.int.Intersection.html#r2"><span class="id" title="variable">r2</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">]</span></a> <a class="idref" href="fl.cfg.Base.html#222c7b239caf3441a28b1c01e5e62c07"><span class="id" title="notation">el</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.BackwardRuleInclusion.G"><span class="id" title="variable">G</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.BackwardRuleInclusion"><span class="id" title="section">BackwardRuleInclusion</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;In&nbsp;this&nbsp;section,&nbsp;we&nbsp;prove&nbsp;that&nbsp;after&nbsp;transformation&nbsp;grammar&nbsp;remains&nbsp;in&nbsp;chomsky&nbsp;normal&nbsp;form.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a name="Intersection.Lemmas.RemainsInChomskyNormalForm"><span class="id" title="section">RemainsInChomskyNormalForm</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a name="Intersection.Lemmas.RemainsInChomskyNormalForm.G"><span class="id" title="variable">G</span></a>: @<a class="idref" href="fl.cfg.Definitions.html#Definitions.grammar"><span class="id" title="definition">grammar</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.Tt"><span class="id" title="variable">Tt</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.Vt"><span class="id" title="variable">Vt</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <a name="Intersection.Lemmas.RemainsInChomskyNormalForm.H_G_in_chomsky_normal_form"><span class="id" title="variable">H_G_in_chomsky_normal_form</span></a>: <a class="idref" href="fl.cfg.Chomsky.html#Chomsky.chomsky"><span class="id" title="definition">chomsky</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.RemainsInChomskyNormalForm.G"><span class="id" title="variable">G</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a name="Intersection.Lemmas.RemainsInChomskyNormalForm.next"><span class="id" title="variable">next</span></a>: @<a class="idref" href="fl.int.DFA.html#DFA.dfa_rule"><span class="id" title="definition">dfa_rule</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.DfaState"><span class="id" title="variable">DfaState</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.Tt"><span class="id" title="variable">Tt</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Note&nbsp;that&nbsp;the&nbsp;initial&nbsp;grammar&nbsp;is&nbsp;in&nbsp;chomsky&nbsp;normal&nbsp;form.&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;After&nbsp;the&nbsp;transformation:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1)&nbsp;There&nbsp;are&nbsp;no&nbsp;(new)&nbsp;epsilon&nbsp;rules<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2)&nbsp;The&nbsp;terminal&nbsp;rules&nbsp;remain&nbsp;terminal&nbsp;and&nbsp;uniform&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(see&nbsp;the&nbsp;definition&nbsp;of&nbsp;grammar&nbsp;to&nbsp;be&nbsp;in&nbsp;chomsky&nbsp;normal&nbsp;form)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3)&nbsp;Rules&nbsp;remain&nbsp;in&nbsp;binarize&nbsp;form<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4)&nbsp;And&nbsp;unitfree.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="Intersection.remains_chomsky"><span class="id" title="lemma">remains_chomsky</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="fl.cfg.Chomsky.html#Chomsky.chomsky"><span class="id" title="definition">chomsky</span></a> (<a class="idref" href="fl.int.Intersection.html#Intersection.convert_rules"><span class="id" title="definition">convert_rules</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.RemainsInChomskyNormalForm.G"><span class="id" title="variable">G</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.RemainsInChomskyNormalForm.next"><span class="id" title="variable">next</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.RemainsInChomskyNormalForm"><span class="id" title="section">RemainsInChomskyNormalForm</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;In&nbsp;this&nbsp;section,&nbsp;we&nbsp;prove&nbsp;that&nbsp;the&nbsp;triple-rules&nbsp;have&nbsp;certain&nbsp;consistent&nbsp;structure.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a name="Intersection.Lemmas.ConsistensyOfTripleRules"><span class="id" title="section">ConsistensyOfTripleRules</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a name="Intersection.Lemmas.ConsistensyOfTripleRules.G"><span class="id" title="variable">G</span></a>: @<a class="idref" href="fl.cfg.Definitions.html#Definitions.grammar"><span class="id" title="definition">grammar</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.Tt"><span class="id" title="variable">Tt</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.Vt"><span class="id" title="variable">Vt</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a name="Intersection.Lemmas.ConsistensyOfTripleRules.next"><span class="id" title="variable">next</span></a>: @<a class="idref" href="fl.int.DFA.html#DFA.dfa_rule"><span class="id" title="definition">dfa_rule</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.DfaState"><span class="id" title="variable">DfaState</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.Tt"><span class="id" title="variable">Tt</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="Intersection.consistensy_of_triple_nonterm_rules"><span class="id" title="lemma">consistensy_of_triple_nonterm_rules</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">from</span> <span class="id" title="var">from1</span> <span class="id" title="var">from2</span> <span class="id" title="var">r</span> <span class="id" title="var">r1</span> <span class="id" title="var">r2</span> <span class="id" title="var">to</span> <span class="id" title="var">to1</span> <span class="id" title="var">to2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="fl.cfg.Definitions.html#Definitions.R"><span class="id" title="constructor">R</span></a> (<a class="idref" href="fl.cfg.Definitions.html#Definitions.V"><span class="id" title="constructor">V</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="fl.int.Intersection.html#from"><span class="id" title="variable">from</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#r"><span class="id" title="variable">r</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#to"><span class="id" title="variable">to</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">[</span></a><a class="idref" href="fl.cfg.Definitions.html#Definitions.Vs"><span class="id" title="constructor">Vs</span></a> (<a class="idref" href="fl.cfg.Definitions.html#Definitions.V"><span class="id" title="constructor">V</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="fl.int.Intersection.html#from1"><span class="id" title="variable">from1</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#r1"><span class="id" title="variable">r1</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#to1"><span class="id" title="variable">to1</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">;</span></a> <a class="idref" href="fl.cfg.Definitions.html#Definitions.Vs"><span class="id" title="constructor">Vs</span></a> (<a class="idref" href="fl.cfg.Definitions.html#Definitions.V"><span class="id" title="constructor">V</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="fl.int.Intersection.html#from2"><span class="id" title="variable">from2</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#r2"><span class="id" title="variable">r2</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#to2"><span class="id" title="variable">to2</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="fl.cfg.Base.html#222c7b239caf3441a28b1c01e5e62c07"><span class="id" title="notation">el</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.convert_rules"><span class="id" title="definition">convert_rules</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ConsistensyOfTripleRules.G"><span class="id" title="variable">G</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ConsistensyOfTripleRules.next"><span class="id" title="variable">next</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="fl.int.Intersection.html#from"><span class="id" title="variable">from</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="fl.int.Intersection.html#from1"><span class="id" title="variable">from1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="fl.int.Intersection.html#to1"><span class="id" title="variable">to1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="fl.int.Intersection.html#from2"><span class="id" title="variable">from2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="fl.int.Intersection.html#to"><span class="id" title="variable">to</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="fl.int.Intersection.html#to2"><span class="id" title="variable">to2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="Intersection.consistensy_of_triple_term_rules"><span class="id" title="lemma">consistensy_of_triple_term_rules</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">from</span> <span class="id" title="var">r</span> <span class="id" title="var">to</span> <span class="id" title="var">te</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="fl.cfg.Definitions.html#Definitions.R"><span class="id" title="constructor">R</span></a> (<a class="idref" href="fl.cfg.Definitions.html#Definitions.V"><span class="id" title="constructor">V</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="fl.int.Intersection.html#from"><span class="id" title="variable">from</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#r"><span class="id" title="variable">r</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#to"><span class="id" title="variable">to</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Lists.List.html#64ee52ab9627fca8d637e2f1207a2990"><span class="id" title="notation">[</span></a><a class="idref" href="fl.cfg.Definitions.html#Definitions.Ts"><span class="id" title="constructor">Ts</span></a> <a class="idref" href="fl.int.Intersection.html#te"><span class="id" title="variable">te</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Lists.List.html#64ee52ab9627fca8d637e2f1207a2990"><span class="id" title="notation">]</span></a> <a class="idref" href="fl.cfg.Base.html#222c7b239caf3441a28b1c01e5e62c07"><span class="id" title="notation">el</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.convert_rules"><span class="id" title="definition">convert_rules</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ConsistensyOfTripleRules.G"><span class="id" title="variable">G</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ConsistensyOfTripleRules.next"><span class="id" title="variable">next</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ConsistensyOfTripleRules.next"><span class="id" title="variable">next</span></a> <a class="idref" href="fl.int.Intersection.html#from"><span class="id" title="variable">from</span></a> <a class="idref" href="fl.int.Intersection.html#te"><span class="id" title="variable">te</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="fl.int.Intersection.html#to"><span class="id" title="variable">to</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Corollary</span> <a name="Intersection.consistensy_of_triple_nonterm_rules'"><span class="id" title="lemma">consistensy_of_triple_nonterm_rules'</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">r</span> <span class="id" title="var">r1</span> <span class="id" title="var">r2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="fl.cfg.Definitions.html#Definitions.R"><span class="id" title="constructor">R</span></a> (<a class="idref" href="fl.cfg.Definitions.html#Definitions.V"><span class="id" title="constructor">V</span></a> <a class="idref" href="fl.int.Intersection.html#r"><span class="id" title="variable">r</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">[</span></a><a class="idref" href="fl.cfg.Definitions.html#Definitions.Vs"><span class="id" title="constructor">Vs</span></a> (<a class="idref" href="fl.cfg.Definitions.html#Definitions.V"><span class="id" title="constructor">V</span></a> <a class="idref" href="fl.int.Intersection.html#r1"><span class="id" title="variable">r1</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">;</span></a> <a class="idref" href="fl.cfg.Definitions.html#Definitions.Vs"><span class="id" title="constructor">Vs</span></a> (<a class="idref" href="fl.cfg.Definitions.html#Definitions.V"><span class="id" title="constructor">V</span></a> <a class="idref" href="fl.int.Intersection.html#r2"><span class="id" title="variable">r2</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">]</span></a> <a class="idref" href="fl.cfg.Base.html#222c7b239caf3441a28b1c01e5e62c07"><span class="id" title="notation">el</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.convert_rules"><span class="id" title="definition">convert_rules</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ConsistensyOfTripleRules.G"><span class="id" title="variable">G</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ConsistensyOfTripleRules.next"><span class="id" title="variable">next</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="fl.int.Intersection.html#Intersection.fst3"><span class="id" title="definition">fst3</span></a> <a class="idref" href="fl.int.Intersection.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.fst3"><span class="id" title="definition">fst3</span></a> <a class="idref" href="fl.int.Intersection.html#r1"><span class="id" title="variable">r1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.thi3"><span class="id" title="definition">thi3</span></a> <a class="idref" href="fl.int.Intersection.html#r1"><span class="id" title="variable">r1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.fst3"><span class="id" title="definition">fst3</span></a> <a class="idref" href="fl.int.Intersection.html#r2"><span class="id" title="variable">r2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.thi3"><span class="id" title="definition">thi3</span></a> <a class="idref" href="fl.int.Intersection.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.thi3"><span class="id" title="definition">thi3</span></a> <a class="idref" href="fl.int.Intersection.html#r2"><span class="id" title="variable">r2</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Corollary</span> <a name="Intersection.consistensy_of_triple_term_rules'"><span class="id" title="lemma">consistensy_of_triple_term_rules'</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<span class="id" title="var">r</span> : <span class="id" title="var">_</span>) (<span class="id" title="var">te</span> : <a class="idref" href="fl.cfg.Definitions.html#Definitions.ter"><span class="id" title="inductive">ter</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="fl.cfg.Definitions.html#Definitions.R"><span class="id" title="constructor">R</span></a> (<a class="idref" href="fl.cfg.Definitions.html#Definitions.V"><span class="id" title="constructor">V</span></a> <a class="idref" href="fl.int.Intersection.html#r"><span class="id" title="variable">r</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Lists.List.html#64ee52ab9627fca8d637e2f1207a2990"><span class="id" title="notation">[</span></a><a class="idref" href="fl.cfg.Definitions.html#Definitions.Ts"><span class="id" title="constructor">Ts</span></a> <a class="idref" href="fl.int.Intersection.html#te"><span class="id" title="variable">te</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Lists.List.html#64ee52ab9627fca8d637e2f1207a2990"><span class="id" title="notation">]</span></a> <a class="idref" href="fl.cfg.Base.html#222c7b239caf3441a28b1c01e5e62c07"><span class="id" title="notation">el</span></a> <a class="idref" href="fl.cfg.Base.html#222c7b239caf3441a28b1c01e5e62c07"><span class="id" title="notation">(</span></a><a class="idref" href="fl.int.Intersection.html#Intersection.convert_rules"><span class="id" title="definition">convert_rules</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ConsistensyOfTripleRules.G"><span class="id" title="variable">G</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ConsistensyOfTripleRules.next"><span class="id" title="variable">next</span></a><a class="idref" href="fl.cfg.Base.html#222c7b239caf3441a28b1c01e5e62c07"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ConsistensyOfTripleRules.next"><span class="id" title="variable">next</span></a> (<a class="idref" href="fl.int.Intersection.html#Intersection.fst3"><span class="id" title="definition">fst3</span></a> <a class="idref" href="fl.int.Intersection.html#r"><span class="id" title="variable">r</span></a>) <a class="idref" href="fl.int.Intersection.html#te"><span class="id" title="variable">te</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.thi3"><span class="id" title="definition">thi3</span></a> <a class="idref" href="fl.int.Intersection.html#r"><span class="id" title="variable">r</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.ConsistensyOfTripleRules"><span class="id" title="section">ConsistensyOfTripleRules</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab3"></a><h1 class="section">Main implications</h1>
 In this section we prove two main lemmas. Derivability in an initial grammar 
        and a dfa implies a derivability in the triple (intersection) grammar. And the other way
        around a derivability in a triple grammar implies a derivability in the initial grammar 
        and the dfa. 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a name="Intersection.Lemmas.MainImplications"><span class="id" title="section">MainImplications</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a name="Intersection.Lemmas.MainImplications.G"><span class="id" title="variable">G</span></a>: @<a class="idref" href="fl.cfg.Definitions.html#Definitions.grammar"><span class="id" title="definition">grammar</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.Tt"><span class="id" title="variable">Tt</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.Vt"><span class="id" title="variable">Vt</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <a name="Intersection.Lemmas.MainImplications.H_G_in_chomsky_normal_form"><span class="id" title="variable">H_G_in_chomsky_normal_form</span></a>: <a class="idref" href="fl.cfg.Chomsky.html#Chomsky.chomsky"><span class="id" title="definition">chomsky</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.MainImplications.G"><span class="id" title="variable">G</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <a name="Intersection.Lemmas.MainImplications.H_syntactic_analysis"><span class="id" title="variable">H_syntactic_analysis</span></a>: <a class="idref" href="fl.int.ChomskyInduction.html#ChomskyInduction.syntactic_analysis_is_possible"><span class="id" title="definition">syntactic_analysis_is_possible</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;We&nbsp;need&nbsp;two&nbsp;fictive&nbsp;functions&nbsp;for&nbsp;changing&nbsp;types.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <a name="Intersection.Lemmas.MainImplications.F1"><span class="id" title="variable">F1</span></a>: <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.DfaState"><span class="id" title="variable">DfaState</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> @<a class="idref" href="fl.cfg.Definitions.html#Definitions.var"><span class="id" title="inductive">var</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.Vt"><span class="id" title="variable">Vt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.DfaState"><span class="id" title="variable">DfaState</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.Vt"><span class="id" title="variable">Vt</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <a name="Intersection.Lemmas.MainImplications.F2"><span class="id" title="variable">F2</span></a>: <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.Vt"><span class="id" title="variable">Vt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.DfaState"><span class="id" title="variable">DfaState</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> @<a class="idref" href="fl.cfg.Definitions.html#Definitions.var"><span class="id" title="inductive">var</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.Vt"><span class="id" title="variable">Vt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.DfaState"><span class="id" title="variable">DfaState</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;It&nbsp;this&nbsp;section&nbsp;we&nbsp;prove&nbsp;that&nbsp;derivability&nbsp;in&nbsp;an&nbsp;initial&nbsp;grammar&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;a&nbsp;dfa&nbsp;implies&nbsp;a&nbsp;derivability&nbsp;in&nbsp;the&nbsp;triple&nbsp;grammar.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a name="Intersection.Lemmas.MainImplications.MainForward"><span class="id" title="section">MainForward</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Note&nbsp;that&nbsp;we&nbsp;cannot&nbsp;use&nbsp;simple&nbsp;induction&nbsp;by&nbsp;derivation&nbsp;in&nbsp;grammar&nbsp;G,&nbsp;in&nbsp;this&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;we&nbsp;will&nbsp;get&nbsp;a&nbsp;phrase&nbsp;(list&nbsp;of&nbsp;terminals&nbsp;and&nbsp;nonterminals)&nbsp;instead&nbsp;of&nbsp;a&nbsp;word.&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Therefore&nbsp;we&nbsp;should&nbsp;use&nbsp;another&nbsp;way&nbsp;to&nbsp;use&nbsp;induction.&nbsp;For&nbsp;grammar&nbsp;in&nbsp;chomsky&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;normal&nbsp;form&nbsp;it&nbsp;is&nbsp;possible&nbsp;(see&nbsp;the&nbsp;file&nbsp;chomsky_induction).&nbsp;Briefly,&nbsp;we&nbsp;can&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;split&nbsp;the&nbsp;word&nbsp;into&nbsp;two&nbsp;subwords,&nbsp;each&nbsp;of&nbsp;which&nbsp;can&nbsp;be&nbsp;derived&nbsp;from&nbsp;some&nbsp;nonterminal.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <a name="Intersection.der_in_initial_grammar_and_dfa_implies_der_in_triple_grammar"><span class="id" title="lemma">der_in_initial_grammar_and_dfa_implies_der_in_triple_grammar</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<span class="id" title="var">next</span>: <a class="idref" href="fl.int.DFA.html#DFA.dfa_rule"><span class="id" title="definition">dfa_rule</span></a>) (<span class="id" title="var">r</span>: <a class="idref" href="fl.cfg.Definitions.html#Definitions.var"><span class="id" title="inductive">var</span></a>) (<span class="id" title="var">from</span> <span class="id" title="var">to</span>: <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.DfaState"><span class="id" title="variable">DfaState</span></a>) (<span class="id" title="var">word</span>: <span class="id" title="var">_</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="fl.cfg.Derivation.html#Derivation.der"><span class="id" title="inductive">der</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.MainImplications.G"><span class="id" title="variable">G</span></a> <a class="idref" href="fl.int.Intersection.html#r"><span class="id" title="variable">r</span></a> (<a class="idref" href="fl.int.Base2.html#Base.to_phrase"><span class="id" title="definition">to_phrase</span></a> <a class="idref" href="fl.int.Intersection.html#word"><span class="id" title="variable">word</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="fl.int.DFA.html#DFA.final_state"><span class="id" title="definition">final_state</span></a> <a class="idref" href="fl.int.Intersection.html#next"><span class="id" title="variable">next</span></a> <a class="idref" href="fl.int.Intersection.html#from"><span class="id" title="variable">from</span></a> <a class="idref" href="fl.int.Intersection.html#word"><span class="id" title="variable">word</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="fl.int.Intersection.html#to"><span class="id" title="variable">to</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="fl.cfg.Derivation.html#Derivation.der"><span class="id" title="inductive">der</span></a> (<a class="idref" href="fl.int.Intersection.html#Intersection.convert_rules"><span class="id" title="definition">convert_rules</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.MainImplications.G"><span class="id" title="variable">G</span></a> <a class="idref" href="fl.int.Intersection.html#next"><span class="id" title="variable">next</span></a>) (<a class="idref" href="fl.cfg.Definitions.html#Definitions.V"><span class="id" title="constructor">V</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="fl.int.Intersection.html#from"><span class="id" title="variable">from</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#r"><span class="id" title="variable">r</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#to"><span class="id" title="variable">to</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>) (<a class="idref" href="fl.int.Base2.html#Base.to_phrase"><span class="id" title="definition">to_phrase</span></a> <a class="idref" href="fl.int.Intersection.html#word"><span class="id" title="variable">word</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;We&nbsp;use&nbsp;the&nbsp;lemma&nbsp;above&nbsp;to&nbsp;prove&nbsp;this&nbsp;lemma.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <a name="Intersection.main_forward"><span class="id" title="lemma">main_forward</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">sdfa</span> <span class="id" title="var">var</span> <span class="id" title="var">word</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="fl.int.DFA.html#DFA.s_dfa_language"><span class="id" title="definition">s_dfa_language</span></a> <a class="idref" href="fl.int.Intersection.html#sdfa"><span class="id" title="variable">sdfa</span></a> <a class="idref" href="fl.int.Intersection.html#word"><span class="id" title="variable">word</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="fl.cfg.Derivation.html#Derivation.language"><span class="id" title="definition">language</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.MainImplications.G"><span class="id" title="variable">G</span></a> <a class="idref" href="fl.int.Intersection.html#var"><span class="id" title="variable">var</span></a> (<a class="idref" href="fl.int.Base2.html#Base.to_phrase"><span class="id" title="definition">to_phrase</span></a> <a class="idref" href="fl.int.Intersection.html#word"><span class="id" title="variable">word</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="fl.cfg.Derivation.html#Derivation.language"><span class="id" title="definition">language</span></a> (<a class="idref" href="fl.int.Intersection.html#Intersection.convert_grammar"><span class="id" title="definition">convert_grammar</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.MainImplications.G"><span class="id" title="variable">G</span></a> <a class="idref" href="fl.int.Intersection.html#sdfa"><span class="id" title="variable">sdfa</span></a>) (<a class="idref" href="fl.cfg.Definitions.html#Definitions.V"><span class="id" title="constructor">V</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="fl.int.DFA.html#DFA.s_start"><span class="id" title="projection">s_start</span></a> <a class="idref" href="fl.int.Intersection.html#sdfa"><span class="id" title="variable">sdfa</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#var"><span class="id" title="variable">var</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.DFA.html#DFA.s_final"><span class="id" title="projection">s_final</span></a> <a class="idref" href="fl.int.Intersection.html#sdfa"><span class="id" title="variable">sdfa</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>) (<a class="idref" href="fl.int.Base2.html#Base.to_phrase"><span class="id" title="definition">to_phrase</span></a> <a class="idref" href="fl.int.Intersection.html#word"><span class="id" title="variable">word</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.MainImplications.MainForward"><span class="id" title="section">MainForward</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;In&nbsp;this&nbsp;section&nbsp;we&nbsp;prove&nbsp;that&nbsp;derivability&nbsp;in&nbsp;a&nbsp;triple&nbsp;grammar&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;implies&nbsp;derivability&nbsp;in&nbsp;the&nbsp;initial&nbsp;grammar&nbsp;and&nbsp;the&nbsp;dfa.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a name="Intersection.Lemmas.MainImplications.MainBackward"><span class="id" title="section">MainBackward</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a name="Intersection.Lemmas.MainImplications.MainBackward.DerivabilityInTripleGrammarImpliesAcceptanceInDFA"><span class="id" title="section">DerivabilityInTripleGrammarImpliesAcceptanceInDFA</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a name="Intersection.Lemmas.MainImplications.MainBackward.DerivabilityInTripleGrammarImpliesAcceptanceInDFA.next"><span class="id" title="variable">next</span></a>: @<a class="idref" href="fl.int.DFA.html#DFA.dfa_rule"><span class="id" title="definition">dfa_rule</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.DfaState"><span class="id" title="variable">DfaState</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.Tt"><span class="id" title="variable">Tt</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a name="Intersection.Lemmas.MainImplications.MainBackward.DerivabilityInTripleGrammarImpliesAcceptanceInDFA.from"><span class="id" title="variable">from</span></a> <a name="Intersection.Lemmas.MainImplications.MainBackward.DerivabilityInTripleGrammarImpliesAcceptanceInDFA.to"><span class="id" title="variable">to</span></a>: <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.DfaState"><span class="id" title="variable">DfaState</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Here&nbsp;we&nbsp;also&nbsp;should&nbsp;use&nbsp;"chomsky_induction".&nbsp;Proof&nbsp;is&nbsp;quite&nbsp;similar&nbsp;to&nbsp;the&nbsp;proof&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;the&nbsp;der_in_initial_grammar_and_dfa_implies_der_in_triple_grammar&nbsp;lemma.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="Intersection.der_in_triple_grammar_implies_dfa_accepts'"><span class="id" title="lemma">der_in_triple_grammar_implies_dfa_accepts'</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">var</span> <span class="id" title="var">word</span>,           <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="fl.cfg.Derivation.html#Derivation.der"><span class="id" title="inductive">der</span></a> (<a class="idref" href="fl.int.Intersection.html#Intersection.convert_rules"><span class="id" title="definition">convert_rules</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.MainImplications.G"><span class="id" title="variable">G</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.MainImplications.MainBackward.DerivabilityInTripleGrammarImpliesAcceptanceInDFA.next"><span class="id" title="variable">next</span></a>) (<a class="idref" href="fl.cfg.Definitions.html#Definitions.V"><span class="id" title="constructor">V</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.MainImplications.MainBackward.DerivabilityInTripleGrammarImpliesAcceptanceInDFA.from"><span class="id" title="variable">from</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#var"><span class="id" title="variable">var</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.MainImplications.MainBackward.DerivabilityInTripleGrammarImpliesAcceptanceInDFA.to"><span class="id" title="variable">to</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>) (<a class="idref" href="fl.int.Base2.html#Base.to_phrase"><span class="id" title="definition">to_phrase</span></a> <a class="idref" href="fl.int.Intersection.html#word"><span class="id" title="variable">word</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a>     <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="fl.int.DFA.html#DFA.final_state"><span class="id" title="definition">final_state</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.MainImplications.MainBackward.DerivabilityInTripleGrammarImpliesAcceptanceInDFA.next"><span class="id" title="variable">next</span></a> (<a class="idref" href="fl.int.Intersection.html#Intersection.fst3"><span class="id" title="definition">fst3</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.MainImplications.MainBackward.DerivabilityInTripleGrammarImpliesAcceptanceInDFA.from"><span class="id" title="variable">from</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#var"><span class="id" title="variable">var</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.MainImplications.MainBackward.DerivabilityInTripleGrammarImpliesAcceptanceInDFA.to"><span class="id" title="variable">to</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>) <a class="idref" href="fl.int.Intersection.html#word"><span class="id" title="variable">word</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.thi3"><span class="id" title="definition">thi3</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.MainImplications.MainBackward.DerivabilityInTripleGrammarImpliesAcceptanceInDFA.from"><span class="id" title="variable">from</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#var"><span class="id" title="variable">var</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.MainImplications.MainBackward.DerivabilityInTripleGrammarImpliesAcceptanceInDFA.to"><span class="id" title="variable">to</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>.<br/>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="Intersection.der_in_triple_grammar_implies_dfa_accepts"><span class="id" title="lemma">der_in_triple_grammar_implies_dfa_accepts</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">var</span> <span class="id" title="var">word</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="fl.cfg.Derivation.html#Derivation.der"><span class="id" title="inductive">der</span></a> (<a class="idref" href="fl.int.Intersection.html#Intersection.convert_rules"><span class="id" title="definition">convert_rules</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.MainImplications.G"><span class="id" title="variable">G</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.MainImplications.MainBackward.DerivabilityInTripleGrammarImpliesAcceptanceInDFA.next"><span class="id" title="variable">next</span></a>) (<a class="idref" href="fl.cfg.Definitions.html#Definitions.V"><span class="id" title="constructor">V</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.MainImplications.MainBackward.DerivabilityInTripleGrammarImpliesAcceptanceInDFA.from"><span class="id" title="variable">from</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#var"><span class="id" title="variable">var</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.MainImplications.MainBackward.DerivabilityInTripleGrammarImpliesAcceptanceInDFA.to"><span class="id" title="variable">to</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>) (<a class="idref" href="fl.int.Base2.html#Base.to_phrase"><span class="id" title="definition">to_phrase</span></a> <a class="idref" href="fl.int.Intersection.html#word"><span class="id" title="variable">word</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="fl.int.DFA.html#DFA.final_state"><span class="id" title="definition">final_state</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.MainImplications.MainBackward.DerivabilityInTripleGrammarImpliesAcceptanceInDFA.next"><span class="id" title="variable">next</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.MainImplications.MainBackward.DerivabilityInTripleGrammarImpliesAcceptanceInDFA.from"><span class="id" title="variable">from</span></a> <a class="idref" href="fl.int.Intersection.html#word"><span class="id" title="variable">word</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.MainImplications.MainBackward.DerivabilityInTripleGrammarImpliesAcceptanceInDFA.to"><span class="id" title="variable">to</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.MainImplications.MainBackward.DerivabilityInTripleGrammarImpliesAcceptanceInDFA"><span class="id" title="section">DerivabilityInTripleGrammarImpliesAcceptanceInDFA</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a name="Intersection.Lemmas.MainImplications.MainBackward.DerivabilityInTripleGrammarImpliesDerivabilityInInitialGrammar"><span class="id" title="section">DerivabilityInTripleGrammarImpliesDerivabilityInInitialGrammar</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a name="Intersection.Lemmas.MainImplications.MainBackward.DerivabilityInTripleGrammarImpliesDerivabilityInInitialGrammar.next"><span class="id" title="variable">next</span></a>: @<a class="idref" href="fl.int.DFA.html#DFA.dfa_rule"><span class="id" title="definition">dfa_rule</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.DfaState"><span class="id" title="variable">DfaState</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.Tt"><span class="id" title="variable">Tt</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="Intersection.der_in_triple_gr_implies_der_in_initial_gr'"><span class="id" title="lemma">der_in_triple_gr_implies_der_in_initial_gr'</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<span class="id" title="var">r</span>: <a class="idref" href="fl.cfg.Definitions.html#Definitions.var"><span class="id" title="inductive">var</span></a>) <span class="id" title="var">word</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="fl.cfg.Derivation.html#Derivation.der"><span class="id" title="inductive">der</span></a> (<a class="idref" href="fl.int.Intersection.html#Intersection.convert_rules"><span class="id" title="definition">convert_rules</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.MainImplications.G"><span class="id" title="variable">G</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.MainImplications.MainBackward.DerivabilityInTripleGrammarImpliesDerivabilityInInitialGrammar.next"><span class="id" title="variable">next</span></a>) <a class="idref" href="fl.int.Intersection.html#r"><span class="id" title="variable">r</span></a> (<a class="idref" href="fl.int.Base2.html#Base.to_phrase"><span class="id" title="definition">to_phrase</span></a> <a class="idref" href="fl.int.Intersection.html#word"><span class="id" title="variable">word</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="fl.cfg.Derivation.html#Derivation.der"><span class="id" title="inductive">der</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.MainImplications.G"><span class="id" title="variable">G</span></a> (<a class="idref" href="fl.int.Intersection.html#Intersection.snd3"><span class="id" title="definition">snd3</span></a> (<a class="idref" href="fl.int.Intersection.html#Intersection.unVar"><span class="id" title="definition">unVar</span></a> <a class="idref" href="fl.int.Intersection.html#r"><span class="id" title="variable">r</span></a>)) (<a class="idref" href="fl.int.Base2.html#Base.to_phrase"><span class="id" title="definition">to_phrase</span></a> <a class="idref" href="fl.int.Intersection.html#word"><span class="id" title="variable">word</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="Intersection.der_in_triple_gr_implies_der_in_initial_gr"><span class="id" title="lemma">der_in_triple_gr_implies_der_in_initial_gr</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<span class="id" title="var">s_start</span> <span class="id" title="var">s_final</span>: <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.DfaState"><span class="id" title="variable">DfaState</span></a>) (<span class="id" title="var">grammar_start</span>: <span class="id" title="var">_</span>) (<span class="id" title="var">word</span>: <a class="idref" href="fl.int.Base2.html#Base.word"><span class="id" title="definition">word</span></a>),  <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="fl.cfg.Derivation.html#Derivation.der"><span class="id" title="inductive">der</span></a> (<a class="idref" href="fl.int.Intersection.html#Intersection.convert_rules"><span class="id" title="definition">convert_rules</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.MainImplications.G"><span class="id" title="variable">G</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.MainImplications.MainBackward.DerivabilityInTripleGrammarImpliesDerivabilityInInitialGrammar.next"><span class="id" title="variable">next</span></a>) (<a class="idref" href="fl.cfg.Definitions.html#Definitions.V"><span class="id" title="constructor">V</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="fl.int.Intersection.html#s_start"><span class="id" title="variable">s_start</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#grammar_start"><span class="id" title="variable">grammar_start</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#s_final"><span class="id" title="variable">s_final</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>) (<a class="idref" href="fl.int.Base2.html#Base.to_phrase"><span class="id" title="definition">to_phrase</span></a> <a class="idref" href="fl.int.Intersection.html#word"><span class="id" title="variable">word</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="fl.cfg.Derivation.html#Derivation.der"><span class="id" title="inductive">der</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.MainImplications.G"><span class="id" title="variable">G</span></a> <a class="idref" href="fl.int.Intersection.html#grammar_start"><span class="id" title="variable">grammar_start</span></a> (<a class="idref" href="fl.int.Base2.html#Base.to_phrase"><span class="id" title="definition">to_phrase</span></a> <a class="idref" href="fl.int.Intersection.html#word"><span class="id" title="variable">word</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.MainImplications.MainBackward.DerivabilityInTripleGrammarImpliesDerivabilityInInitialGrammar"><span class="id" title="section">DerivabilityInTripleGrammarImpliesDerivabilityInInitialGrammar</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Now&nbsp;we&nbsp;can&nbsp;split&nbsp;the&nbsp;conclusion&nbsp;of&nbsp;the&nbsp;lemma&nbsp;and&nbsp;use&nbsp;the&nbsp;lemmas&nbsp;above&nbsp;to&nbsp;finish&nbsp;the&nbsp;proof.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <a name="Intersection.main_backward"><span class="id" title="lemma">main_backward</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">sdfa</span> <span class="id" title="var">var</span> <span class="id" title="var">word</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="fl.cfg.Derivation.html#Derivation.language"><span class="id" title="definition">language</span></a> (<a class="idref" href="fl.int.Intersection.html#Intersection.convert_grammar"><span class="id" title="definition">convert_grammar</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.MainImplications.G"><span class="id" title="variable">G</span></a> <a class="idref" href="fl.int.Intersection.html#sdfa"><span class="id" title="variable">sdfa</span></a>) (<a class="idref" href="fl.cfg.Definitions.html#Definitions.V"><span class="id" title="constructor">V</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="fl.int.DFA.html#DFA.s_start"><span class="id" title="projection">s_start</span></a> <a class="idref" href="fl.int.Intersection.html#sdfa"><span class="id" title="variable">sdfa</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.Intersection.html#var"><span class="id" title="variable">var</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="fl.int.DFA.html#DFA.s_final"><span class="id" title="projection">s_final</span></a> <a class="idref" href="fl.int.Intersection.html#sdfa"><span class="id" title="variable">sdfa</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>) (<a class="idref" href="fl.int.Base2.html#Base.to_phrase"><span class="id" title="definition">to_phrase</span></a> <a class="idref" href="fl.int.Intersection.html#word"><span class="id" title="variable">word</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="fl.int.DFA.html#DFA.s_dfa_language"><span class="id" title="definition">s_dfa_language</span></a> <a class="idref" href="fl.int.Intersection.html#sdfa"><span class="id" title="variable">sdfa</span></a> <a class="idref" href="fl.int.Intersection.html#word"><span class="id" title="variable">word</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="fl.cfg.Derivation.html#Derivation.language"><span class="id" title="definition">language</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.MainImplications.G"><span class="id" title="variable">G</span></a> <a class="idref" href="fl.int.Intersection.html#var"><span class="id" title="variable">var</span></a> (<a class="idref" href="fl.int.Base2.html#Base.to_phrase"><span class="id" title="definition">to_phrase</span></a> <a class="idref" href="fl.int.Intersection.html#word"><span class="id" title="variable">word</span></a>).<br/>
 
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.MainImplications.MainBackward"><span class="id" title="section">MainBackward</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas.MainImplications"><span class="id" title="section">MainImplications</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="fl.int.Intersection.html#Intersection.Lemmas"><span class="id" title="section">Lemmas</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab4"></a><h1 class="section">Main Theorem</h1>
 In this section we prove the main theorem about existence of grammar of intersection. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a name="Intersection.Main"><span class="id" title="section">Main</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">Terminal</span> <span class="id" title="var">Nonterminal</span>: <a class="idref" href="https://math-comp.github.io/math-comp/htmldoc/mathcomp.ssreflect.eqtype.html#Equality.Exports.eqType"><span class="id" title="abbreviation">eqType</span></a>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <a name="Intersection.Main.H_T_eq_dec"><span class="id" title="variable">H_T_eq_dec</span></a>: <a class="idref" href="fl.cfg.Base.html#c1731816e3fe7dbb40e25e75f2002544"><span class="id" title="notation">eq_dec</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Main.Terminal"><span class="id" title="variable">Terminal</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <a name="Intersection.Main.H_V_eq_dec"><span class="id" title="variable">H_V_eq_dec</span></a>: <a class="idref" href="fl.cfg.Base.html#c1731816e3fe7dbb40e25e75f2002544"><span class="id" title="notation">eq_dec</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Main.Nonterminal"><span class="id" title="variable">Nonterminal</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variables</span> (<a name="Intersection.Main.TToNat"><span class="id" title="variable">TToNat</span></a>: <a class="idref" href="fl.int.Intersection.html#Intersection.Main.Terminal"><span class="id" title="variable">Terminal</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a name="Intersection.Main.UToNat"><span class="id" title="variable">UToNat</span></a>: <a class="idref" href="fl.int.Intersection.html#Intersection.Main.Nonterminal"><span class="id" title="variable">Nonterminal</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a name="Intersection.Main.NatToU"><span class="id" title="variable">NatToU</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Main.Nonterminal"><span class="id" title="variable">Nonterminal</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <a name="Intersection.Main.bijection"><span class="id" title="variable">bijection</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>, <a class="idref" href="fl.int.Intersection.html#Intersection.Main.UToNat"><span class="id" title="variable">UToNat</span></a> (<a class="idref" href="fl.int.Intersection.html#Intersection.Main.NatToU"><span class="id" title="variable">NatToU</span></a> <a class="idref" href="fl.int.Intersection.html#x"><span class="id" title="variable">x</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="fl.int.Intersection.html#x"><span class="id" title="variable">x</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <a name="Intersection.Main.H_syntactic_analysis"><span class="id" title="variable">H_syntactic_analysis</span></a>: <a class="idref" href="fl.int.ChomskyInduction.html#ChomskyInduction.syntactic_analysis_is_possible"><span class="id" title="definition">syntactic_analysis_is_possible</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a name="Intersection.Main.number_of_states"><span class="id" title="variable">number_of_states</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Let</span> <a name="Intersection.Main.DfaState"><span class="id" title="variable">DfaState</span></a>: <span class="id" title="keyword">Type</span> := <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Vectors.Fin.html#t"><span class="id" title="inductive">t</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Main.number_of_states"><span class="id" title="variable">number_of_states</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Let</span> <a name="Intersection.Main.list_of_states"><span class="id" title="variable">list_of_states</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Main.DfaState"><span class="id" title="variable">DfaState</span></a> := <a class="idref" href="fl.int.Intersection.html#Intersection.values_list_gen"><span class="id" title="definition">values_list_gen</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Main.number_of_states"><span class="id" title="variable">number_of_states</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Consider&nbsp;an&nbsp;arbitrary&nbsp;dfa&nbsp;with&nbsp;n&nbsp;states.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a name="Intersection.Main.dfa"><span class="id" title="variable">dfa</span></a>: @<a class="idref" href="fl.int.DFA.html#DFA.dfa"><span class="id" title="record">dfa</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Main.DfaState"><span class="id" title="variable">DfaState</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Main.Terminal"><span class="id" title="variable">Terminal</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Consider&nbsp;an&nbsp;arbitrary&nbsp;grammar&nbsp;G&nbsp;with&nbsp;start&nbsp;symbol&nbsp;S.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a name="Intersection.Main.G"><span class="id" title="variable">G</span></a>: @<a class="idref" href="fl.cfg.Definitions.html#Definitions.grammar"><span class="id" title="definition">grammar</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Main.Terminal"><span class="id" title="variable">Terminal</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Main.Nonterminal"><span class="id" title="variable">Nonterminal</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a name="Intersection.Main.S"><span class="id" title="variable">S</span></a>: @<a class="idref" href="fl.cfg.Definitions.html#Definitions.var"><span class="id" title="inductive">var</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Main.Nonterminal"><span class="id" title="variable">Nonterminal</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <a name="Intersection.Main.H_S_el_of_G"><span class="id" title="variable">H_S_el_of_G</span></a>: <a class="idref" href="fl.cfg.Definitions.html#Definitions.Vs"><span class="id" title="constructor">Vs</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Main.S"><span class="id" title="variable">S</span></a> <a class="idref" href="fl.cfg.Base.html#222c7b239caf3441a28b1c01e5e62c07"><span class="id" title="notation">el</span></a> <a class="idref" href="fl.cfg.Symbols.html#Symbols.dom"><span class="id" title="definition">dom</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Main.G"><span class="id" title="variable">G</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;We&nbsp;prove&nbsp;that&nbsp;there&nbsp;exists&nbsp;grammar&nbsp;intersection.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <a name="Intersection.grammar_of_intersection_exists"><span class="id" title="lemma">grammar_of_intersection_exists</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">∃</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">(</span></a><span class="id" title="var">NewNonterminal</span>: <span class="id" title="keyword">Type</span>) (<span class="id" title="var">IntersectionGrammar</span>: @<a class="idref" href="fl.cfg.Definitions.html#Definitions.grammar"><span class="id" title="definition">grammar</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Main.Terminal"><span class="id" title="variable">Terminal</span></a> <a class="idref" href="fl.int.Intersection.html#NewNonterminal"><span class="id" title="variable">NewNonterminal</span></a>) <span class="id" title="var">St</span><a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">word</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="fl.int.DFA.html#DFA.dfa_language"><span class="id" title="definition">dfa_language</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Main.dfa"><span class="id" title="variable">dfa</span></a> <a class="idref" href="fl.int.Intersection.html#word"><span class="id" title="variable">word</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="fl.cfg.Derivation.html#Derivation.language"><span class="id" title="definition">language</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Main.G"><span class="id" title="variable">G</span></a> <a class="idref" href="fl.int.Intersection.html#Intersection.Main.S"><span class="id" title="variable">S</span></a> (<a class="idref" href="fl.int.Base2.html#Base.to_phrase"><span class="id" title="definition">to_phrase</span></a> <a class="idref" href="fl.int.Intersection.html#word"><span class="id" title="variable">word</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.5pl1/stdlib/Coq.Init.Logic.html#df1ced36fc33ce188051218bca314374"><span class="id" title="notation">↔</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="fl.cfg.Derivation.html#Derivation.language"><span class="id" title="definition">language</span></a> <a class="idref" href="fl.int.Intersection.html#IntersectionGrammar"><span class="id" title="variable">IntersectionGrammar</span></a> <a class="idref" href="fl.int.Intersection.html#St"><span class="id" title="variable">St</span></a> (<a class="idref" href="fl.int.Base2.html#Base.to_phrase"><span class="id" title="definition">to_phrase</span></a> <a class="idref" href="fl.int.Intersection.html#word"><span class="id" title="variable">word</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="fl.int.Intersection.html#Intersection.Main"><span class="id" title="section">Main</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="fl.int.Intersection.html#Intersection"><span class="id" title="module">Intersection</span></a>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>